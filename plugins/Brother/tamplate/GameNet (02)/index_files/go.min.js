/*! Copyright (c), Syncopate Limited and/or affiliates. All rights reserved. GameNet\Go 2015-11-24 */!function(a){function b(a,b){var c=new RegExp("[?&]"+b+"=([^&]*)").exec(a);return c&&decodeURIComponent(c[1].replace(/\+/g," "))}function c(){if(".dev"!==location.host.substr(-4))return"//go.gamenet.ru/click/ajax";var a=window.location.hostname;return a=a.substr(0,a.lastIndexOf(".")),a=a.substr(a.lastIndexOf(".")+1),window.location.protocol+"//go."+a+".dev/click/ajax"}function d(a,b){var c=a.attr("href");-1!==c.indexOf("?")?-1!==c.indexOf("mid=")?a.attr("href",c.replace(/(mid=)([^\&]+)?/,"$1"+b)):a.attr("href",c+"&mid="+b):a.attr("href",c+"?mid="+b)}function e(a,b){a.is("a")&&d(a,b),a.is("input")&&a.val(b),a.data("mid",b)}a.fn.marketingProcess=function(d,f){var g=this,h=(b(window.location.search,"mid")||b(document.referrer,"mid"),a.extend({agentId:"",payType:"b",subId:"",siteId:"",userId:"",useReferrer:!1,injectPixels:!1},d));h.referrer=(h.useReferrer?document.referrer:window.location.href).split("?")[0],h.referrer.length>0&&"/"!=h.referrer[h.referrer.length-1]&&(h.referrer+="/"),a.ajax({type:"GET",dataType:"jsonp",cache:!1,crossDomain:!0,xhrFields:{withCredentials:!0},url:c(),data:h,success:function(b){function c(b){var c=document.createElement("script");return c.type="text/javascript",c.text=a(b).html(),void 0!==a(b).attr("id")?c.id=a(b).attr("id"):null,void 0!==a(b).attr("src")?c.src=a(b).attr("src"):null,document.body.appendChild(c),""}"function"==typeof f&&f(b.mid),g.each(function(){e(a(this),b.mid)}),b.script&&h.injectPixels&&(-1!==b.script.indexOf("<script")&&(b.script=b.script.replace(/<script(.*?)>(.*?)<\/script>/gim,c)),a("body").append(b.script))}})}}(jQuery);