!function(a){var b,c={},d=a.okModules||(a.okModules={}),f=a.document,g=f.documentElement;c.e=d.gh4Wvfw,c.f=d.ffi0zg,c.g=d.fR7JqXA,c.h=d.uih3DA,c.i=d.taWQcQ,c.j=d.rS1Fsew,c.k=d.anMiJqQ,c.l=d.lEjiK2w,c.m=d.drmw1pw,c.p=d.dkYTtkQ,c.q=d.enDyBg,c.r=d.bNXpVIA,c.t=d.oqKOAmg,c.u=d.cTB47WQ,c.v=d.sq2VowA,c.w=d.i1cv4hw,c.y=d.t06j1LA,c.z=d.dZOX2ow,c.aa=d.vz5ZtYw,c.ab=d.p5v5Bpg,c.ad=d.dAScy1A,c.ae=d.tFQn7A,c.af=d.cSkJoQg,c.ag=d.aSQOUbQ,c.ah=d.lfEjqEA,c.ai=d.sCNXRig,c.aj=d.o32dCkQ,c.ak=d.srbkIYw,c.al=d.sx2ng6A,c.am=d.inIv7XA,c.an=d.tTkx9Vg,c.ap=d.tHdjjgg,c.aq=d.oLP05wA,c.ar=d.pDEtI1A,c.as=d.s4bYXpw,c.ay=d.imaxwvg,c.az=d.ns1fqw,c.bb=d.cNzQkQ,c.bc=d.tVgyu1A,c.bd=d.rkxiB0A,c.be=d.aGvMJ9g,c.bf=d.aFANw,c.bh=d.djmTZrQ,c.bi=d.vadqk1Q,c.bj=d.hKFfvg,c.bk=d.cObjQ9g||(d.cObjQ9g=function(){function b(){}function c(a){return i+a}function d(a){return a}function f(a,b){"function"==typeof a&&a(b)}function g(a,b){this.objectStorage=a,this.keyFactory=b||d}function h(c){if(c in a)try{var d,f=a[c],g="t"+Date.now();if(f.setItem(g,g),d=f.getItem(g)===g,f.removeItem(g),d)return f}catch(a){}return new b}var i="z";return b.prototype={setItem:function(a,b){this[a]=b},getItem:function(a){return this[a]}},g.prototype={fixKey:function(a){return c(this.keyFactory(a))},store:function(a,b){this.objectStorage.setItem(this.fixKey(a),b)},get:function(a){return this.objectStorage.getItem(this.fixKey(a))},update:function(a,b,c){b(a,function(b){this.store(a,b),f(c,b)}.bind(this))},getOrAdd:function(a,b,c){var d=this.get(a);return null!=d?f(c,d):this.update(a,b,c),d},getOrAddAndUpdate:function(a,b,c){var d=this.getOrAdd(a,b,c);null!=d&&this.update(a,b,c)}},{makePermanentCache:function(a){return new g(h("localStorage"),a)},makeSessionCache:function(a){return new g(h("sessionStorage"),a)},makeObjectsCache:function(a){return new g(new b,a)}}}()||a),c.bl=d.rcv7FFg||(d.rcv7FFg=function(b,c,d,g,h,i){function k(a){b.measure=a}function l(b){a.createCookie=b?function(a,c,d){"CDN"===a&&b(c),l(null)}:null}function m(){if(!x){x=h.start();var a=C.get("CDN");if(!w||a)x.resolve(a);else{setTimeout(function(){x.resolveIfNotDone(a)},E),l(function(a){a||(a=F),C.store("CDN",a),x.resolveIfNotDone(a)});var b=f.createElement("script");b.src="//mycdn.me/static/cdn/cdn.js?timestamp="+Date.now(),f.head.appendChild(b),x.anyway(function(){d.remove(b)})}}return x}function n(b,c){m().then(function(d){(new Image).src=["/dk?st.cmd=clientStat&st.opid=",a.pageCtx.stateId,"&st.rtime=",b,"&st.dtime=",c,"&st.cdn="+(d||F)].join("")})}function o(){B||(B=!0,setTimeout(function(){var a=A.loadEventEnd-A.navigationStart,b=A.domContentLoadedEventEnd-A.navigationStart;0>a&&(a=v),0>b&&(b=v),n(a,b)},D))}function p(a){v=a.timeout,w=a.detectCdn;var b=setTimeout(function(){b=null,o()},v);c.fullyLoaded.then(function(){clearTimeout(b),o()})}function q(){k(t)}function s(e){var a=e.domLoadedTime;setTimeout(function(){n("x",a)},D)}function t(){g.navigated.attachOnce(s)}var v,w,x,z=a.performance,A=z&&z.timing,B=!1,C=(Date.now(),i.makeSessionCache()),D=400,E=2e3,F="NONE";return A?(g.navigating.attach(q),void k(p)):void k(function(){})}(c.e,c.l,c.m,c.am,c.i,c.bk)||a),c.bm=d.lEMgXaQ||(d.lEMgXaQ=function(a){return a.create({workWithOutsideInputs:!1,heightBySidebar:!1,blockHeight:!0,"toolbarSearch.enabled":!1,"toolbarSearch.active":!1})}(c.aj)||a),c.bn=d.tt9qziQ||(d.tt9qziQ=function(a){return a.create({enabled:!1,showToolbarMenuConfigure:!1,showToolbarMenuEnable:!1})}(c.aj)||a),c.bo=d.sHWROaQ||(d.sHWROaQ=function(a){return a.create({heightBySidebar:!1})}(c.aj)||a),c.bp=d.m1sDnaQ||(d.m1sDnaQ=function(a,b,c,d){function f(){b.set("workWithOutsideInputs",b.get("toolbarSearch.enabled")||c.get("enabled")),b.set("toolbarSearch.active",b.get("toolbarSearch.enabled")&&c.get("enabled"))}function g(){a.set("enabled",a.get("configured")&&(!c.get("enabled")||c.get("showToolbarMenuEnable")))}function h(){a.set("asColumn",c.get("enabled"))}function i(){a.set("stickyEnabled",a.get("stickyConfigured")&&c.get("enabled"))}c.synced("enabled",function(a){b.set("heightBySidebar",a),d.set("heightBySidebar",a),g(),f(),i(),h()}),b.synced("toolbarSearch.enabled",function(){f()}),a.synced("configured",function(){g()}),c.synced("showToolbarMenuEnable",function(){h(),g()}),a.synced("stickyConfigured",i)}(c.ak,c.bm,c.bn,c.bo)||a),c.bq=d.rYQ1zeA||(d.rYQ1zeA=function(a){var b="okMark"+Date.now();return function(c,d,f,g,h,i){function k(a,b,c,d){if(a){if(a[l])return;a[l]=!0}f.call(this,a,b,c,d)}var l=b+c;return a(d,k,g,h,i)}}(c.f)||a),c.br=d.g52S7QA||(d.g52S7QA=function(a,b,c,d,g,h,i){function k(){h("error-notice",f.querySelectorAll(".error-notification_txt"),function(a){t=f.querySelector(".error-notification"),v=t.style,w=f.querySelector(".error-notification-w"),q=a,s=a.innerHTML,x=!0,t.addEventListener(g,l,!1),t.addEventListener("click",m,!1)})}function l(){D||(c.removeClass(w,z),c.removeClass(w,A))}function m(){0!==C&&(clearTimeout(C),C=0),p()}function n(a){return"translateY("+a+(0===a?"":"px")+")"}function o(a,b){x||k(),q&&(q.innerHTML=a||s,D||(D=!0,i.setStyle(t,n(-t.offsetHeight)),c.addClass(w,z),d.request(function(){d.request(function(){c.addClass(w,A),i.setStyle(t,n(0))})})),C&&clearTimeout(C),C=setTimeout(p,b||B))}function p(){C=0,D&&(D=!1,i.setStyle(t,n(-t.offsetHeight)))}var q,s,t,v,w,x=!1,z="__showed",A="__animated",B=2e3,C=0,D=!1;return a.Toast={show:o,hide:p}}(c.e,c.p,c.m,c.ag,c.ae,c.bq,c.ap)||a),c.bs=d.cqKztVw||(d.cqKztVw=function(){function a(){this.handlers=[]}return a.prototype={run:function(){for(var a=this.handlers,b=a.length-1;b>=0;b--){var c=a[b].apply(0,arguments);if(c)return c}return!1},enqueue:function(a){a instanceof Function&&(a.okIsChainRoot?this.handlers.splice(0,0,a):this.handlers.push(a))}},{create:function(){return new a}}}()||a),c.bt=d.eZbnNRg||(d.eZbnNRg=function(){function a(e){return e.clientX?e:((e.touches&&e.touches.length?e.touches:null)||e.changedTouches||[{clientX:0,clientY:0}])[0]}function b(a){return{x:a.clientX,y:a.clientY}}function c(e){if(e.clientX)return[b(e)];var a=e.touches;a&&a.length||(a=e.changedTouches);var c=[];if(a)for(var d=0,f=a.length;f>d;d++)c[d]=b(a[d]);return c}return{touchX:function(e){return a(e).clientX},touchY:function(e){return a(e).clientY},firstTouch:function(e){return b(a(e))},touches:c,isDefaultPrevented:function(e){return"defaultPrevented"in e?e.defaultPrevented:"returnValue"in e?e.returnValue===!1:"getPreventDefault"in e?e.getPreventDefault():void 0}}}()||a),c.bu=d.aD4uIVg||(d.aD4uIVg=function(a,b,c,d,g,h,i,k,l,m){function n(e){for(var a=e.target,b=D;a;){if("A"===a.tagName){b=p(a,e);break}if("INPUT"!==a.tagName&&"BUTTON"!==a.tagName||"submit"!==a.type){if("LABEL"===a.tagName)break;a=a.parentElement}else{var c=a.form;if(c){c.okSubmitBtn=a;break}}}b.calledClick||b.handled||w(e)}function o(e){var a=e.target,b=a.okSubmitBtn;!b||k.isDefaultPrevented(e)||h.hasClass(a,"js-noajax")||p(b,e)}function p(a,e,b){var f={target:a},g={calledClick:!1,handled:!1};m.copySet(E,e,f),b=b||v,x(f),f.originalEvent=e;var h=a.href,i=a.form;i&&(h=i.action);var l=d.see(h);if(!l.internal||l.appHook)return g;var n={query:c.params(h),uri:h,method:i&&i.method,form:i,target:a,isDefaultPrevented:function(){return e?k.isDefaultPrevented(e):!1},allowDefault:function(){this.doGo=!0},triggerClickEvent:function(){e&&(g.calledClick=!0,w(e))}};return b.run(n)&&(e&&!n.doGo&&(e.preventDefault(),e.returnValue=!1),g.handled=!0),g}function q(){if(!z){z=!0,l.setNavigation({handleClick:n,handleSubmit:p}),f.addEventListener("submit",o),v=b.create();var c=a.asapHandle,d=c.event;d&&setTimeout(function(){p(c.link,d)},4),c.dispose(),s(t)}}function s(a){v.enqueue(a)}function t(a){var b=a.target,c=(a.retry||0)+1;return h.hasClass(b,"js-click")&&B>c?A?!0:(a.retry=c,A=!0,setTimeout(function(){A=!1,v.run(a)},C),!0):!1}var v,w=i.clickEvent,x=g(),z=!1,A=!1,B=40,C=300,D={},E=["clientX","clientY"];return{register:function(a){q(),s(a)},go:function(a,b){var c=f.createElement("a");return c.href=a,p(c,null,b).handled},clickPreview:x}}(c.e,c.bs,c.h,c.bd,c.t,c.m,c.bf,c.bt,c.ad,c.aq)||a),c.bv=d.lj3hoIA||(d.lj3hoIA=function(b){function c(){return a.location}return{change:function(a,d){(d||!b.go(a))&&(c().href===a?c().reload(!0):c().href=a)},reload:function(a){this.change(c().href,a)}}}(c.bu)||a),c.bw=d.ghSletg||(d.ghSletg=function(b,c,d,g,h){function i(a){var b=0;try{b=parseInt(sessionStorage.lastFullRefreshTime||0)||0}catch(a){}var c=Date.now();1e3>c-b?setTimeout(a,1e3):a();try{sessionStorage.lastFullRefreshTime=b}catch(a){}}function k(a){return"1"==a.getResponseHeader("X-Full-Refresh")}function l(b){var c=b.getResponseHeader("Redirect-Location");if(c){i(function(){if(b.okNoReferrer){var d=a.location,f=a.history,i=f&&f.replaceState,l=f&&f.state,m=d.href;i?(f.replaceState(null,null,"/?__noref"),setTimeout(function(){setTimeout(function(){f.replaceState(l,null,m)},0),d.replace(c)},0)):d.replace(h.ie?c:"data:text/html,"+encodeURIComponent('<html><head><meta http-equiv="refresh" content="1;URL='+c+'"/></head></html>'))}else g.change(c,k(b))});var d=b.okTask;return d&&(d.redirected=!0),!0}}function m(a){var b=a.getResponseHeader("Refresh-Requested");return b?(i(function(){g.reload(k(a))}),!0):void 0}function n(a){if(a.okTask&&a.okTask.isExternal())return!1;var b=a.getResponseHeader("X-Error-Message");b&&setTimeout(function(){c.show(decodeURIComponent((b+"").replace(/\+/g,"%20")))},20);var d=l(a);if(null!=d)return d;var f=m(a);return f?f:null!=b}return a.$&&$(f).ajaxComplete(function(e,a){n(a)}),d.success.attach(function(e){e.rejected=n(e.xhr)}),n}(c.e,c.br,c.be,c.bv,c.ab)||a),c.bx=d.soLgGug||(d.soLgGug=function(c,d,g){function h(e){e.xhr.okTask&&e.xhr.okTask.isExternal()||(i=(e.xhr||this.xhr).getResponseHeader("X-Sec-Token"))}var i,k=a.pageCtx,l=k.secKey,m=function(a){var b,c=a.indexOf(l+"=");return c>-1?(b=a.indexOf("&",c),-1==b&&(b=a.length),a.substring(0,c)+l+"="+i+a.substring(b)):a};l&&(a.$&&$(f).ajaxSuccess(function(e,a){h({xhr:a})}),c.success.attach(h),g.tapPreview.attach(function(e){i&&d.findParent(e.target,function(a){var c=a.href,d=a.form;return c&&(a.href=m(c||"")),d&&(d.action=m(d.action||"")),(c||d)!==b})}))}(c.be,c.p,c.r)||a),c.by=d.gDo0vJQ||(d.gDo0vJQ=function(b){return b.getViewportSize=function(){var b,c;return a.innerHeight?(c=a.innerWidth,b=a.innerHeight):"CSS1Compat"==f.compatMode?(c=g.offsetWidth,b=g.offsetHeight):(c=f.body.offsetWidth,b=f.body.offsetHeight),[c,b]},b.getViewportSize}(c.e)||a),c.bz=d.cJ2StaA||(d.cJ2StaA=function(b,c,d){function g(){function b(){var b,i=f.querySelector(".uform"),k=!1;i&&(g||"#lst"!==a.location.hash||(b=f.querySelector('a[name="lsta"]'),b&&(a.scrollTo(0,1),setTimeout(function(){var a=d.getTotalOffsetTop(b),g=d.getTotalOffsetTop(i)+i.offsetHeight,h=c()[1];k=Math.abs(a-g)<=h,k?(f.body.scrollTop=d.getTotalOffsetTop(i)-c()[0],i.scrollIntoView(!1)):b.scrollIntoView()},h))),(g||k)&&i.scrollIntoView())}var g=a.pageCtx&&a.pageCtx.alwaysFocusForm,h=100;setTimeout(b,h)}b.checkCommentFormPosition=g}(c.e,c.by,c.m)||a),c.ca=d.nzpbqQg||(d.nzpbqQg=function(b,c,d,f){function g(){var c=this;c.states=[],c.history=a.history,c.signupForPopState=!0,h.onStart(c),c.stateAccounting=b(),c.stateAccounted=b(),c.statePopping=b(),c.renderState=b(),c.inited=!1}g.prototype={getState:function(){return this.cachedState||(this.cachedState=this.history.state||this.defaultState)},back:function(){this.cachedState=null,this.history.back(),h.onWentBack(this)},backToRoot:function(b){if(this.canGoBackToRoot(b)){var c=this.currentState;setTimeout(function(){var b=this.currentState;c===b&&a.location.reload()}.bind(this),100),this.newRootState=b,this.history.go(-this.cachedState.okNavIndex)}else this.go(b,"replaceState")},canGoBackToRoot:function(a){var b=this.cachedState;return this.getState()&&a.type===b.type&&b.okNavIndex>0},go:function(a,b){delete this.newRootState,this.accountState(a,b),this.openState(a)},accountStateUpdate:function(){this.accountState(this.cachedState,"replaceState")},accountState:function(a,b){var c={state:a,samePage:"replaceState"===b};this.stateAccounting(c);var d=b||"pushState";if(a){var f=this.currentState,g=f&&f.type===a.type;a.okNavIndex=this.newRootState?0:(g?f.okNavIndex||0:0)+("pushState"!==d||f&&!g?0:1)}try{this.history[d](a,null,a.url||null)}catch(a){}h.onStateAccounted(this,a),this.cachedState=a,this.currentState=a,this.stateAccounted(c)},recoverState:function(a){this.openState(a),this.currentState=a},openState:function(a){this.cachedState=a=a||this.defaultState||{},this.renderState(a)},prepareForFutureStateChange:function(){f.stopLoading()},onPopState:function(e){var a=this,b=e.state;a.newRootState&&(a.accountState(a.newRootState,"replaceState"),b=a.newRootState),h.onStateAccounted(a,b),b=b||this.defaultState;var c={state:b};this.statePopping(c),b=c.state,a.openState(b),a.currentState=b},init:function(){this.inited||(this.history.scrollRestoration="manual",this.inited=!0,this.defaultState={},this.cachedState=this.history.state,h.onStateAccounted(this,this.getState()),this.signupForPopState&&(a.addEventListener("popstate",this.onPopState.bind(this),!1),h.onSignedUpForPopstate(this)))}};var h=function(){function b(){}function f(b){function c(a){return h+a}function f(a,b){var f=d.clone(b);l[c(a)]=f,g.state=f}var g=b.history,h="state";g.okPolyfill=!0,b.signupForPopState=!1;var i=(new Date).getTime(),k=(new Date).getTime(),l={};l[c(k)]=null;var m="#"+h;g.pushState=function(a){k=(new Date).getTime(),f(k,a),location.hash=m+k},g.replaceState=function(a){f(k,a)},a.addEventListener("hashchange",function(){var a=location.hash;if(a||(a="#"+c(i)),0==a.indexOf(m)&&(a=a.slice(m.length),a!=k)){k=a;var f=d.clone(l[c(k)]);g.state=f,b.onPopState({state:f})}})}function g(a){a.okNavIndex=0}var h=c.android&&c.androidVersion.number,i=h&&4>h,k={onStart:b,onSignedUpForPopstate:b,onWentBack:b,onStateAccounted:b};if(history.pushState||(k.onStart=f),i){k.onSignedUpForPopstate=function(b){var c=!1;a.addEventListener("pageshow",function(e){if(c){c=!1;var a=b.getState();g(a),b.accountStateUpdate()}},!1),a.addEventListener("beforeunload",function(e){c=!0},!1)};var l,m=null;k.onStateAccounted=function(a,b){b!=m&&(l=m,m=b)},k.onWentBack=function(a){l&&g(l),m=l,l=null,a.onPopState({state:m})}}return k}();return new g}(c.t,c.ab,c.aq,c.l)||a),c.cb=d.pZtF2Vg||(d.pZtF2Vg=function(b,c,d,f){function g(){}function h(a){var b=a.query["st.cmd"];return b in p?(l(a),!0):!1}function i(a){m.use(n,function(){m.use(o,function(){a()})}),m.use(o,g)}function k(a){return function(){f.prepareForFutureStateChange(),setTimeout(a,4)}}function l(a){i(k(function(){b.photoLayer.launch({clickSrc:a.target,effects:a.effects!==!1})}))}var m=b.loader,n="photo-layer-js",o="photo-layer-css",p={userTouchPhoto:1,groupTouchPhoto:1,touchPhotoAttachment:1,altGroupPhoto:1,friendPhoto:1,friendStreamPhoto:1,friendAlbumPhoto:1,userStreamPhoto:1,userPhoto:1,userAlbumPhoto:1,altGroupStreamPhoto:1},q=!1;b.initPhotoLayer=d.create({init:function(){i(g),c.register(h)},update:function(d){b.photoOptions=d,q&&(d.returnUrl=null),q=!0,d.openPhotoSoon&&(c.go(a.location.href,{run:h})||i(k(function(){b.photoLayer.launchShortlink()})))}})}(c.e,c.bu,c.v,c.ca)||a),c.cc=d.eOT0UXg||(d.eOT0UXg=function(a,b){function c(b,c,d){a(d,function(a,d){c[b](d,a,!1)})}function d(a,c,d,f,g){a.addEventListener(c,function(e){var c=e.target,g=b.parentBySelector(c,d);g&&b.isChildOf(g,a)&&f.call(g,e)},g||!1)}return{listen:c.bind(0,"addEventListener"),stopListening:c.bind(0,"removeEventListener"),delegate:d}}(c.g,c.p)||a),c.cd=d.dmITcaQ||(d.dmITcaQ=function(a,b,c,d,g){var h=".",i="dlg",k="hidden",l="visible",m="content",n=h+m,o="cls",p=h+o,q=function(a,b){this.init(a,b)},s=function(a){function c(a){return d.parentBySelector(a.target,".__dialog-scrolled")||a.preventDefault(),!1}var g,h={touchstart:function(a){g=!0},touchmove:function(a){g&&(a.preventDefault(),g=!1)},keydown:function(a){var b=a.keyCode;return 38===b||40===b?(a.preventDefault(),!1):void 0},wheel:c,mousewheel:c};return{lock:function(){b.listen(f,h)},unlock:function(){b.stopListening(f,h)}}},t=function(b){var c=a.calc();b.style.top=c.scrollTop-1+"px",b.style.height=c.height+1+"px"};return q.prototype={constructor:q,init:function(a,b){var f=this;f._el=a,f._container=a.querySelector(n),f._locker=new s(a),f._visible=!1,c.addClass(a,i);var g=d.parentBySelector(a,p);g&&g.addEventListener("click",function(e){c.preventDefault(e),setTimeout(function(){f.close()},0)},!1)},lockScrolling:function(){this._locker.lock()},unlockScrolling:function(a){this._locker.unlock(),"undefined"==typeof a&&(a=!0),this._reposition=a},addCssClass:function(a){return c.addClass(this._el,a),this},removeCssClass:function(a){return c.removeClass(this._el,a),this},show:function(){function b(b){var c=i._reposition;if(i._visible&&c&&b){var g=f.activeElement;if(g&&d.isChildOf(g,h)&&0==(g.type||"").indexOf("text")){var k=b.height;return void("undefined"!=typeof i._viewportHeight&&i._viewportHeight!=k&&setTimeout(function(){b=a.calc();var c,d,f,g=b.scrollTop;c=i._container.offsetHeight,d=b.height,f=c>d?g-c+d:g+(d-c)/2,h.style.top=f+"px"},100))}t(h)}}var h=this._el,i=this;t(h),c.removeClass(h,k),c.addClass(h,l),h.setAttribute("aria-hidden","false"),i._viewportHeight=a.calc().height,i._locker.lock(),a.changed.attach(b),setTimeout(b,g.keyboard.closeTimeout),i._reposition=!0,i._onViewChange=b,i._visible=!0},close:function(){var b=this,d=b._el;b._onViewChange&&(a.changed.detach(b._onViewChange),b._onViewChange=null),b._locker.unlock(),d.setAttribute("aria-hidden","true"),c.removeClass(d,l),c.addClass(d,k),d.style.top="-9999px",b._visible=!1;var f=b._container;setTimeout(function(){c.clear(f)},0)},getElement:function(){return this._el},getContentElement:function(){return this._container},handleScreenResize:function(){this._visible&&t(this._el)},isVisible:function(){return this._visible}},q}(c.aa,c.cc,c.m,c.p,c.z)||a),c.ce=d.ssHLxcA||(d.ssHLxcA=function(a,b){function c(a){var c=f.createElement("script"),d=a.type||"text/javascript",g=d.match(/javascript/i);g&&(c.type=d,a.src?c.src=a.src:c.innerHTML=a.innerHTML,f.head.appendChild(c),b.remove(c))}return{run:c,runAll:function(b){a(b.querySelectorAll("script"),c)}}}(c.f,c.m)||a),c.cf=d.dELQYlA||(d.dELQYlA=function(a){function b(b,c){var d=b.indexOf("#");return-1!==d&&-1!==b.indexOf("js-dlg",d)||a.matches(c,".dlgl")}function c(a){return b(a.href,a)}return{isDialogLink:c,isDialogElement:b}}(c.p)||a),c.cg=d.aCr3dbg||(d.aCr3dbg=function(){return{filterSelf:function(a,b){for(var c=a.length-1;c>=0;c--){var d=a[c];b(d,c)||a.splice(c,1)}},isEmpty:function(a){return!a||!a.length},first:function(a,b){for(var c=0,d=a.length;d>c;c++){var f=a[c];if(b(f))return f}},areEqual:function(a,b){if(a==b)return!0;if(!a&&b||a&&!b||a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!=b[c])return!1;return!0}}}()||a),c.ch=d.pJWDPJw||(d.pJWDPJw=function(a,b,c,d,f){function g(a){var b=m[a.type]||i;if(k!==b){var c={state:a,current:b,previous:k};k&&k.deactivated(c),k=b,b.activated(c)}k&&k.render(a)}function h(a,c){var d=this;c=c||n,d.isInited=!1,d.type=a,d.typeIncludesDefault=c.isDefault,d.useSwap=!1,d.prepare=b(),d.accountingState=b(),d.launch=b(),d.config=b(),d.activated=b(),d.deactivated=b(),d.pipeline=[],o(d)}var i,k,l=[],m={},n={},o=d.create({init:function(){a.init(),a.renderState.attach(g)},update:function(a){l.push(a),m[a.type]=a,a.typeIncludesDefault&&(i=a),a.isActive()&&(k=a)}});return h.prototype={isActive:function(b){var c=(b||a.getState()).type;return c===this.type||!c&&this.typeIncludesDefault},getState:function(){var b=a.getState();return this.isActive(b)?b:null},appendPipeline:function(a){this.pipeline=this.pipeline.concat(a)},removeFromPipeline:function(a){f.filterSelf(this.pipeline,function(b){return b!==a})},init:function(a){this.isInited?this.config(a):(this.launch(a),this.config(a),this.isInited=!0)},render:function(b){b=b||a.getState();var c=this;if(c.isActive(b)&&c.isInited){var d={state:b,cancelled:!1};if(c.prepare(d),!d.cancelled)for(var f=c.pipeline,g=0,h=f.length;h>g;g++)f[g](b)}},stamp:function(a){a.type=this.type,this.accountingState({state:a})},go:function(b,c){this.stamp(b);var d=this.useSwap;this.useSwap=!1,c=d?"replaceState":c||"pushState",a.go(b,c)},swapOnGo:function(){this.useSwap=!0},swap:function(a){this.go(a,"replaceState")},goOrSwapIfSamePage:function(b){var c=a.getState();this[c&&c.pageName==b.pageName?"swap":"go"](b)},backToRoot:function(b){this.stamp(b),this.useSwap=!1,a.backToRoot(b)}},{create:function(a,b){return new h(a,b)}}}(c.ca,c.t,c.f,c.v,c.cg)||a),c.ci=d.aZrBKQ||(d.aZrBKQ=function(b,c,d,g,h,i,k,l,m,n,o,p,q,s,t,v,w,x){function z(h){function l(){ca&&(ca.focus(),ca=null)}function m(a){ia&&ia.setAttribute("aria-hidden",a)}function t(){var a,b=!1;a=aa.querySelector("form"),a&&k(a.elements,function(a){var c=a.type,d=-1!==navigator.userAgent.indexOf("OS 8_");return"hidden"===c||d&&"submit"===c?void 0:(ba=a,a.focus(),b=!0,a)}),b||(aa.focus(),ba=aa)}function v(){var a=_.getContentElement().offsetHeight,b=n.calc().height;a>b&&_.unlockScrolling(!1)}function z(){t(),v(),c({dialog:_,target:fa})}function B(){Z&&(Z.abort(),Z=null)}function C(){_||($=ga,_=new b($),aa=_.getElement(),da=aa.querySelector(H))}function D(a){x.change(a)}function I(a){N.go({url:a})}function L(a,b){function c(){var c=this.xhr,d=this.response();if(d&&d.length>0){var f=function(){b.deferredPush&&!h&&I(a),"1"===c.getResponseHeader("X-New-Modal")&&g.addClass(l,"__redesign"),l.innerHTML=d,p.runAll(l),_.removeCssClass(E).addCssClass(F),__pstd=0,setTimeout(z,0),b.onShowed&&b.onShowed(l,b)};setTimeout(f,0)}}function d(){var a=this.xhr;if(_.removeCssClass(E).addCssClass(F),aa.setAttribute("aria-busy","false"),g.remove(da),200===a.status){var b=a.getResponseHeader("X-Error-Message");null!=b&&b.length>0&&_.unlockScrolling()}}b=b||{},a=s.abs(a);var h=!!b.dontPush,i=b.method||"GET",k=s.see(a);if(ea=b,fa=b.target||null,0!=a.trim().indexOf("//")&&k.internal){B(),C(),_.lockScrolling();var l=_.getContentElement();g.clear(l),m("true"),b.deferredPush||h||I(a),_.addCssClass(E).removeCssClass(F),aa.appendChild(da),aa.setAttribute("aria-busy","true"),_.show(),f.addEventListener("keydown",W,!1);var n=o.request(a,i);n.header("X-Requested-Popup","1"),n.then(c,R).anyway(d).send(),Z=n}}function R(a){a||(a={errorInfo:"dialog request internet error"}),_.unlockScrolling(),S(a)}function S(a){m("false"),_&&_.isVisible()&&_.close(),ba&&ba.blur(),f.removeEventListener("keydown",W,!1),ca&&setTimeout(l,0),ea&&ea.onClosed&&(ea.onClosed(a),ea=null)}function T(){B(),_.unlockScrolling(),m("false"),S(),l()}function U(){var a=N.isActive();w.back(),a&&setTimeout(function(){N.isActive()?(N.swap({url:"#",avoidDialog:!0}),T()):_._visible&&T()},50)}function V(e){var b,c,d=e.target,f=a.pageCtx&&a.pageCtx.handlesBack;if(i.matches(d,K)&&!i.matches(d,M)&&!i.parentBySelector(d,M)){if(b=d.href,c=b&&-1!==b.indexOf("js-bck")||i.matches(d,J)||i.parentBySelector(d,J))return f||U(),!0;if(b)return S(),setTimeout(function(){D(b)},10),!0;var g=d.form;g&&"submit"===d.type&&S()}return!1}function W(e){27==e.keyCode&&S()}function X(){if((!_||!_._visible)&&Date.now()-O>1e3){var a=N.getState(),b=a.url;b&&!a.avoidDialog&&L(b,{dontPush:!0,deferredPush:ha})}}function Y(){_&&T()}var Z,$,_,aa,ba,ca,da,ea,fa,ga=f.getElementById("dialog"),ha=h.deferredPush,ia=f.getElementById("content");return N.activated.attach(X),N.deactivated.attach(Y),a.addEventListener("resize",function(){C(),setTimeout(function(){_.handleScreenResize()},100)},!1),d.register(function(e){var a=e.target,b=e.uri,c=e.method,d="_blank"===a.target;return b&&!d&&!i.parentBySelector(a,G)&&q.isDialogElement(b,a)?(ca=a,setTimeout(function(){L(b,{dontPush:!1,method:c,deferredPush:ha,target:a})},0),!0):i.matches(a,K)?V(e):!1}),f.addEventListener&&f.addEventListener("focus",function(e){aa&&!i.isChildOf(e.target,aa)&&setTimeout(t,0)},!0),A=function(a){L(a.url,{dontPush:!1,method:a.method||"GET",deferredPush:ha,onShowed:a.onShowed||null,onClosed:a.onClosed||null})},P.isInited=!0,this}var A,B,C=".",D="dlg",E="ld",F="cmpl",G=C+D,H=C+D+"-"+E,I="bck",J=C+I,K=G+" a,"+G+" input,"+G+" button",L="js-axh",M=C+L,N=v.create("ajaxDialog"),O=Date.now();N.isAjaxDialog=!0,h.initAjaxDialog=t.create({init:function(a){z(a)}});var P={isInited:!1,close:function(){N.isActive()&&w.back()},show:function(a){A&&A(a)},hide:function(a){B&&B(a)}};return P}(c.cd,c.az,c.bu,c.m,c.e,c.p,c.f,c.t,c.h,c.aa,c.be,c.ce,c.cf,c.bd,c.v,c.ch,c.ca,c.bv)||a),c.cj=d.mKbksKw||(d.mKbksKw=function(a,b,c,d,g,h,i){function k(){return x||(x=f.createElement("audio"),x.style.display="none",f.body.appendChild(x),x.okIsApproved=!0,x.src="",x.play(),setTimeout(function(){x.pause()},4)),x}function l(){if(!w){var b=a.initTopicMusic(x);z=b.audioPlayer,w=b.api}}function m(b){var c=this;c.trackElement=b,c.trackId=b.getAttribute("data-track"),c.inited=!1,k(),a.loader.use("topic-music-js",function(){l(),c.inited=!0,c.play()})}function n(a){var b=c.parentBySelector(a,J);return null===b?null:b.okTrack||(b.okTrack=new m(b))}function o(){d(f.querySelectorAll(D),q)}function p(a){b.removeClass(a,A),b.addClass(a,B);var d=null!==c.parentBySelector(a,".gift-i_ctrl")?"playGift":"playStatus";logClientEvent("music",[d])}function q(a){b.removeClass(a,B),b.addClass(a,A)}function s(a,b,c,d){var f=[b,c,d],g=f.length,h=0;return a.replace(/%s/g,function(a){var b=g>h?f[h]:"";return h++,b})}var t,v,w,x,z,A="ply",B="pse",C=".mus",D=C+"."+B,E="data-uid",F="["+E+"]",G="data-playlist",H="["+G+"]",I="data-track",J="["+I+"]",K="#play",L="#pause";m.prototype={setIsSelected:function(){},onPlayheadMove:function(){},onBufferProgress:function(){},isFromStatus:!0,play:function(){var a=this;if(a.inited)if(z.select(a),a.sourceUrl)z.play();else if(a.trackId){var b=function(c){a.sourceUrl=b.q(c.play),z.load(),z.play()};w.getAudioSource(this.trackId,b)}},pause:function(){z.pause()},getNext:function(){o();var a=this.trackElement,b=c.parentBySelector(a,"li").nextSibling;if(!b)return null;var d=b.querySelector(J);return d?(p(d),n(d)):null}},a.initMusicStatus=h.create({init:function(){var a=new Date;g.clickEvent.attach(function(e){var d=e.target;if(d=c.parentBySelector(d,".mply")||c.parentBySelector(d,".mpse")){if((new Date).getTime()-a.getTime()<500)return;a=new Date;var f=c.parentBySelector(d,C),g=b.hasClass(f,A);if(o(),g?(p(f),-1!=d.href.indexOf(K)&&(e.preventDefault(),n(d).play())):(q(f),-1!=d.href.indexOf(L)&&(e.preventDefault(),n(d).pause())),v&&g){var h=c.parentBySelector(f,F),k="";h&&(k=h.getAttribute(E)||""),h=c.parentBySelector(f,H);var l;h&&(l=h.getAttribute(G));var m=f.getAttribute("data-track");l&&m&&(e.preventDefault(),e.stopPropagation(),i.change(s(t,m,l,k)))}}})},update:function(a){t=a.playUrl,v=a.trackListEnabled,d(f.querySelectorAll(".gifts_ul"),function(a){a.addEventListener("touchstart",k)})}})}(c.e,c.m,c.p,c.f,c.bf,c.v,c.bv)||a),c.ck=d.mDNWJg||(d.mDNWJg=function(a){var b="OSMMap",c=14;a.initMap=function(){var a=f.getElementById(b);if(a){var d=a.getAttribute("data-lat"),g=a.getAttribute("data-lng"),h=a.getAttribute("data-mapSrc");OK.loader.use("leaflet-js",function(){OK.loader.use("leaflet-css",function(){var a=L.map(b,{dragging:!1,zoomControl:!1,scrollWheelZoom:!1}).setView([d,g],c);a.attributionControl.setPrefix('<a target="_blank" href="http://maps.me" class="leaflet-mapsme"></a><a target="_blank" href="http://leafletjs.com">Leaflet</a>'),L.tileLayer(h,{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}).addTo(a);var f=L.icon({iconUrl:"/mres/img/places/pin.png",iconSize:[32,32],iconAnchor:[16,32]}),i=L.marker([d,g]);i.setIcon(f).setOpacity(.8).addTo(a)})})}}}(c.e)||a),c.cl=d.mNKAJAg||(d.mNKAJAg=function(){return{createDomTree:function(a,b){var c=f.createElement(b||"div");return c.insertAdjacentHTML("beforeend",a),c}}}()||a),c.cm=d.p3k7WdQ||(d.p3k7WdQ=function(a){var b={};return{collectPushRequestParams:a(),put:function(a,c){b[a]=c},get:function(a){return b[a]}}}(c.t)||a),c.cn=d.gqLTew||(d.gqLTew=function(a){function b(a,b,c,d){d.appendChild(c[0])}return function(c){var d=f.createDocumentFragment();return a(c.childNodes,b,null,d),d}}(c.f)||a),c.co=d.pOrhggw||(d.pOrhggw=function(a,b,c,d,g,h,i,k,l){function m(){throw new Error}function n(a){return{position:a,relaunchScripts:!1,run:function(a){a.container.insertAdjacentHTML(this.position,a.content)},invert:m}}function o(a,b,c,d){if("special"===b)return null;var g=d.targetId;if(!g){var h=d.targetsSelector,i=d.targetSelector||h;if(i)return f[h?"querySelectorAll":"querySelector"](i)}return f.getElementById(g)}function p(a){var b={};return k.copy(a,b),b.container=null,b.content=null,b.contentDom=null,b}function q(a,b,c){if(a){var d=i.get(a),f=d&&d[b];f&&f.call(d,c)}}function s(a,b,c){return{pushType:a,envelope:b,domNode:c}}function t(a,d,f){var g=[],h=b.createDomTree(a),i=d.parseDomEnvelope,k=d.onDomParsed;return c(h.childNodes,function(a,b){if(a.getAttribute){var c=a.getAttribute("target-id"),h=c?null:a.getAttribute("target-qs"),k=c||h?null:a.getAttribute("targets-qs"),l=a.getAttribute("push-type"),m={pushType:l,action:a.getAttribute("action"),isCritical:a.hasAttribute("data-critical"),irreversible:a.hasAttribute("data-irreversible"),index:b,options:d,context:f,content:a.innerHTML,contentDom:a,targetId:c,targetSelector:h,targetsSelector:k},n=z[m.action];n&&n.parseDomNode&&n.parseDomNode(a,m),i&&i(a,m),q(l,"pushParse",s(l,m,a)),q(l,"pushReceived",s(l,m)),g.push(m)}}),f&&(f.envelopes=g),k&&k(f),g}function v(a,b){return a||b.needsContainer===!1}function w(a,b,d){var f=a.getContainer||o,i=a.onEnvelope,k=a.onComplete,l=!0;c(b,function(c,k){var m=c.pushType,n=c.action,t=c.content,x=f(k,n,t,c);x===!1&&(x=o(k,n,t,c)),c.content=t,c.container=x;var A,B=z[n],C=null;if(B)if(v(x,B)){var D=0,E=x instanceof NodeList?x:null;if(E&&(x=E[D],c.container=x,c.containers=E),a.computeUndo&&!c.irreversible){var F=d.undo||(d.undo=[]),G=p(c);B.invert(c,G),F.push(G)}do{if(v(x,B)&&(C=B.run(c),x=c.container,x&&B.relaunchScripts&&g.runAll(x)),!E)break;c.container=x=++D<E.length?E[D]:null}while(x);E&&(c.container=null)}else d&&c.isCritical&&(d.failed||(d.failed=[])).push(c);return i&&i(k,n,t,x),q(m,"pushProcessed",s(m,c)),h.envelope.applied(c),A=C&&C.task,A&&k!==b.length-1?(A.anyway(function(){w(a,b.slice(k+1),d)}),l=!1,!0):void 0}),l&&k&&k(d)}function x(a,b,c){b=b||{};var d=t(a,b,c);w(b,d,c)}var z={content:{relaunchScripts:!0,run:function(a){a.container.innerHTML=a.content},invert:function(a,b){b.content=a.container.innerHTML}},replace:{relaunchScripts:!0,run:function(a){var b=a.container,c=a.contentDom,f=b.parentNode;if(c){a.container=c.firstChild;var g=l(c);f.replaceChild(g,b)}else{var h=d.indexOfChild(f,b);b.outerHTML=a.content,a.container=f.childNodes[h]}},invert:function(a,b){b.content=a.container.outerHTML}},append:n("beforeend"),prepend:n("afterbegin"),remove:{run:function(a){var b=!0,c=a.options.onBeforeRemove,f=a.container;c&&(b=c(a.index,a.content,f)),b!==!1&&d.remove(f)},invert:m},attribute:{parseDomNode:function(a,b){b.name=a.getAttribute("name"),b.value=a.getAttribute("value")},run:function(a){var b=a.name,c=a.value;b&&b.length&&(null===c?a.container.removeAttribute(b):a.container.setAttribute(b,c))},invert:function(a,b){var c=a.name;if(c&&c.length){var d=a.container;b.value=d.getAttribute(c)}}},insert:{needsContainer:!1,parseDomNode:function(a,b){b.beforeId=a.getAttribute("before")},run:function(a){var b=a.beforeId,c=a.content,d=a.container;if(b&&b.length>0){var g=f.getElementById(b);g&&g.insertAdjacentHTML("beforebegin",c)}else d&&d.insertAdjacentHTML("beforeend",c)},invert:m},special:{needsContainer:!1,parseDomNode:function(a,b){b.specialTarget=a.getAttribute("target-special")},run:function(a){var b=a.options.special;return b[a.specialTarget].run(a)},invert:function(a,b){var c=a.options.special,d=c[a.specialTarget].invert;d&&d(a,b)}}};a.OP_APPEND="append",a.processAjaxEnvelope=x;var A=x;return A.processAjaxEnvelopes=w,A}(c.e,c.cl,c.f,c.m,c.ce,c.am,c.cm,c.aq,c.cn)||a),c.cp=d.faPc1hQ||(d.faPc1hQ=function(a){function c(c){var d={};return a(c.elements,function(a){var f,g=a.value;switch(a.type){case"checkbox":f=a.checked?g||"on":b;break;case"radio":f=a.checked?g||"on":b;break;case"submit":
a===c.okSubmitBtn&&(f=g);break;default:f=g}f!==b&&(d[a.name]||(d[a.name]=[])).push(f)}),d}return{data:c}}(c.f)||a),c.cq=d.p7ukmgA||(d.p7ukmgA=function(a,b,c,d,f,g){function h(a){var b=a.processing;return a.success=function(c){a.prepareProcessing&&a.prepareProcessing(c),g(c.response,b,c)},i(a)}function i(g){var h=g.indicatorSelector,i=function(e){function a(){clearTimeout(m),m=null,t.response=this.response(),g.success(t)}function i(){this.aborted||(c.addClass(q,o),t.failed=!0,g.fail&&g.fail(t))}function l(){m&&clearTimeout(m),c.removeClass(q,n),g.complete&&g.complete(t)}var p=e.target,q=h&&b.parentBySelector(p,h)||p,s=g.selector;if(s&&!b.matches(p,s)||c.hasClass(p,"__once"))return!1;var t=g.prepare(e)||{};if(t.cancelled)return!t.allowDefault;c.removeClass(q,o),m=setTimeout(function(){c.addClass(q,n)},500);var v=d.request(e.uri,e.method,e.form?f.data(e.form):null).then(a,i).anyway(l);return t.ajaxTask=v,g.tuneRequest&&g.tuneRequest(t),k(g)&&v.withToken(),v.send(),!0};return g.isDefault&&(i.okIsChainRoot=!0),a.register(i),new l(i)}function k(a){return!a.avoidToken}function l(a){this.run=a}var m,n="ld",o="err";return l.prototype={go:function(b){a.go(b,this)}},{onLink:i,onLinkToAjaxEnvelope:h}}(c.bu,c.p,c.m,c.be,c.cp,c.co)||a),c.cr=d.lhuYqaA||(d.lhuYqaA=function(a,b,c,d,f,g,h){var i=".widget-list",k=".widget,.js-ajax-btn-block",l={};a.listenToLikeClicks=h.create({init:function(a){g.onLinkToAjaxEnvelope({selector:".js-ajax-btn-self",prepare:function(e){},prepareProcessing:function(){return l}}),g.onLink({selector:".widget_like,.js-ajax-btn",indicatorSelector:k,prepare:function(e){var b=e.target,c=d.parentBySelector(b,i),f=d.parentBySelector(b,k),g=(new Date).getTime(),h=c.okLastClicked||0;return a>g-h?{cancelled:!0}:{block:f,wrapper:c}},success:function(a){var b=a.response,c=a.block;if(b&&b.length>0){var d=c.parentNode;d&&(d.outerHTML=b,a.block=d.querySelector(k))}},complete:function(a){var b;(b=a.wrapper)&&(b.okLastClicked=(new Date).getTime())}})}})}(c.e,c.bu,c.m,c.p,c.be,c.cq,c.v)||a),c.cs=d.s0IDiew||(d.s0IDiew=function(a,b,c,d,f){var g="&st.phlst=",h="/apphook/userPhoto?",i="&spids=",k="#",l="href";return a.scrollCollagePhotos=f.create({init:function(){c.register(function(a){var c=a.target;if(d.hasClass(c,"collage-item")){var f=b.parentBySelector(c,".collage");if(f){var m=f.getAttribute("data-scroll-ids");if(m){var n=c.getAttribute(l);-1!==n.indexOf(h)?-1===n.indexOf(i)&&(n=n+i+m,c.setAttribute(l,n)):-1===n.indexOf(i)&&(n=-1!==n.indexOf(k)?n.replace(k,g+encodeURIComponent(m)+k):n+g+encodeURIComponent(m),c.setAttribute(l,n))}}}})}}),a.scrollCollagePhotos}(c.e,c.p,c.bu,c.m,c.v)||a),c.ct=d.tRKdv8A||(d.tRKdv8A=function(){String.prototype.trim||!function(){var a=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;String.prototype.trim=function(){return this.replace(a,"")}}()}()||a),c.cu=d.fxpkQA||(d.fxpkQA=function(){function a(a){for(var b={},c=0,d=a.length;d>c;++c){var e=a[c];if(e.name)switch(e.type){case"checkbox":b[e.name]=e.checked?"on":"off";break;case"select-one":b[e.name]=e.options[e.selectedIndex].value}}return b}return{serialize:a}}()||a),c.cv=d.soIbhEA||(d.soIbhEA=function(a){return{processed:a.create()}}(c.q)||a),c.cw=d.sJZDS4Q||(d.sJZDS4Q=function(b,c,d,h,i,k,l,m){function n(){return t||(t=b.hiddenElementSelectors||[],t.push("#footer")),t}function o(){i(n(),function(a){var b=f.querySelector(a);b&&-1===v.indexOf(b)&&(b.style.display="none",v.push(b))})}function p(){i(v,function(a){a.style.display="block"}),v.length=0}function q(){if(w||(w=!0,l.onChanged(q),m.resize.attach(q)),f.querySelector(".empty-page,.full-screen")){o();var b,h=c.hasClass(g,"search-on"),i=h?"#search-results-container ":"",n=f.querySelector(i+".empty-page_cnt,"+i+".full-screen_cnt");if(n&&!d.parentBySelector(n,".no-stub")){b=n.parentNode;var t=d.parentBySelector(n,".bbox");t&&(t.style.marginBottom=0);var v=n.offsetHeight,x=f.querySelector(h?".a-search_i":"#content"),z=a.getComputedStyle(x),A=Math.ceil(parseFloat(z.marginTop)+parseFloat(z.marginBottom)),B=a.getComputedStyle(b),C=Math.ceil(parseFloat(B.paddingBottom)),D=x.offsetHeight-C-v,E=f.getElementById("head"),F=h||!E?0:E.offsetHeight;setTimeout(function(){var d=a.innerHeight-D-F-A;n.style.height=d+"px",c.removeClass(b,"__init"),l.get("heightBySidebar")?n.style.paddingBottom=f.body.offsetHeight-m.calc().height+"px":n.style.paddingBottom="",k.processed.trigger()},h||c.hasClass(f.body,"wp")?100:0)}s()}else p(),k.processed.trigger()}function s(){var a=f.getElementById("stubActionBtn");a&&a.addEventListener("click",function(e){var b=a.getAttribute("data-querySelector"),c=f.querySelector(b);c&&(e.preventDefault(),c.click(),c.focus())},!1)}var t,v=[],w=!1;return h.updated.attach(q),h.cancelled.attach(q),b.initStubs=q,{blockHasStub:function(a){return 0!==a.getElementsByClassName("empty-page").length}}}(c.e,c.m,c.p,c.ah,c.f,c.cv,c.bo,c.aa)||a),c.cx=d.lzaWiig||(d.lzaWiig=function(a,b){return{init:function(){function c(b){a.set("toolbarSearch.enabled",b.width>=480)}b.syncChanged(c)}}}(c.bm,c.aa)||a),c.cy=d.tvGodNw||(d.tvGodNw=function(a){return{open:a.create(),close:a.create()}}(c.q)||a),c.cz=d.lghbp4Q||(d.lghbp4Q=function(c,d,h,i,k,l,m,n,o,p,q,s,t,v,w,x,z,A,B,C,D,E,F,G,H,I,J,K,L,M){function N(){return h.hasClass(Ea,"messaging")}function O(a,b){var c,d,f,g=this;g._options=b||{},g._saveFocus=!1,g._searchInputActive=!1,g._searchTimeout=-1,g._sessionData=null,g._resultsRequestTask=null,g._lastFocusedSearchInput=null,g._outsideSearchInput=null,g._outsideCancelButton=null,g._focusedSearchInput=null,g._lastFocusedInput=null,g._searchLayer=a,c=a.getElementsByClassName("search_input"),c.length&&(g._searchLayerSearchInput=c[0],g._searchLayerSearchInputWrapper=i.parentBySelector(g._searchLayerSearchInput,".input-text"),d=a.getElementsByClassName(Ba),d.length&&(g._searchLayerCancelButton=d[0],g._searchLayerResults=a.querySelector(".a-search_results"),g._searchLayerContentWrapper=a.querySelector(".a-search_i"),g._cancelled=!1,g._resultsHeight=0,g._model=f=v.create({isActive:!1,inLooking:!1,query:"",sessionData:null,isOutsideInputActive:!1}),f.onChanged("isActive",function(a){var b=this,c=b._searchLayer;c.setAttribute("aria-hidden",!a),h.switchClass(c,a,xa),h.switchClass(Ea,a,ya),b._searchLayerSearchInputWrapper&&h.switchClass(b._searchLayerSearchInputWrapper,a,"__active")},g),f.onChanged("inLooking",function(b){var c=this;h.switchClass(a,b,wa),c._searchLayerResults.setAttribute("aria-busy",b),c._searchLayerSearchInputWrapper&&h.switchClass(c._searchLayerSearchInputWrapper,b,"__in-progress")},g),f.onChanged("isOutsideInputActive",function(a){var b=this;h.switchClass(b._searchLayerContentWrapper,a,"__outside-search-field-active")},g),f.onChanged("sessionData",function(b,c){var d,f,g,i,k=this;c&&(k._outsideSearchInput=null,k._outsideCancelButton=null,k._focusedSearchInput=null,d=c.haveOutsideInput,f=c.input,g=c.searchMeta.searchScope,g&&h.removeClass(Ea,g+"-search-scope"),i=c.searchMeta.from,i&&h.removeClass(Ea,"search-from-"+i),d&&f&&ca(k,f),da(k,c.cancel),c.onend()),b&&(g=b.searchMeta.searchScope,g&&h.addClass(Ea,g+"-search-scope"),i=b.searchMeta.from,i&&h.addClass(Ea,"search-from-"+i),d=b.haveOutsideInput,f=b.input?b.input:null,k._outsideSearchInput=b.input,k._outsideCancelButton=b.cancel,k._endpointUrl=b.form.getAttribute("data-endpoint"),k._defaultEndpointUrl=k._endpointUrl,k._endpointUrl&&p(a.getElementsByClassName(za),function(b){b.name&&h.switchClass(a,-1!==k._endpointUrl.indexOf(Ca+b.name+Da),"__has_mod_"+b.name)}),d&&f&&(aa(k,f),k._focusedSearchInput=f,k._model.set("isOutsideInputActive",!0)),ba(k,b.cancel))},g),M.open.attach(function(a){var b=this;b._model.get("isActive")&&z.request(function(a,b){a._calculateSearchViewHeight(b)},b,a)},g),M.close.attach(function(){var a=this;a._model.get("isActive")&&a._calculateSearchViewHeight()},g)))}function P(a,e){var b=e.currentTarget;if(!b||Z(a,b,"_searchLayerCancelButton")||Z(a,b,"_outsideCancelButton"))e.preventDefault(),a.end(!0);else{var c,d;if(d=i.findParent(e.target,function(a){return c=a.getAttribute("data-target"),null!==c?!0:void 0}),c){var f=d.getAttribute("data-endpoint");f&&(e.preventDefault(),a._endpointUrl=f,a._submitRequest())}}}function R(a,e){27===e.keyCode?a.end(!0):13!==e.keyCode||N()||a._notifyFormSubmission()}function S(a,e){var b=h.hasClass(e.target,za);("change"!==e.type||b)&&(b||a._model.set("query",e.target.value),c.is.androidStockBrowser&&ka(),a._submitRequest())}function T(a,e){a._searchInputActive=!0,a._focusedSearchInput=e.target}function U(a,e){h.preventDefault(e),N()||a._notifyFormSubmission()}function V(a,e){e.target!==a._focusedSearchInput&&(a._searchInputActive=!1),k.android&&"blur"==e.type&&a._searchInputActive&&a._focusedSearchInput.focus()}function W(){this._calculateSearchViewHeight()}function X(a){var b=a._searchLayerContentWrapper;return b.getBoundingClientRect().height}function Y(a,b){var c=f.getElementById("head");c&&(b+=c.offsetHeight),a._resultsHeight=b,L.height.override("search",b+"px","hidden")}function Z(a,b,c){return b===a[c]||b.parentNode===a[c]}function $(a){var b=this,c=b.value;c!==a&&(b.value=a)}function _(a){var b=this,c=b._model.get("sessionData").searchMeta;if(l.queryChange({query:a,from:c.from,searchScope:c.searchScope,input:c.input}),Na.isActive()){var d=Na.getState();d.query=a,G.accountStateUpdate()}}function aa(a,b){A.listen(b,{focus:a,input:a}),b.addEventListener("blur",a,!0),A.listen(b.form,{submit:a,change:a})}function ba(a,b){b&&b.addEventListener("click",a,!1)}function ca(a,b){A.stopListening(b,{input:a,focus:a}),b.removeEventListener("blur",a,!0),A.stopListening(b.form,{submit:a,change:a})}function da(a,b){b&&b.removeEventListener("click",a,!1)}function ea(a,b){A.listen(b,{touchstart:a,mousedown:a,click:a})}function fa(a,b){A.stopListening(b,{touchstart:a,mousedown:a,click:a})}function ga(){t.resetScroll(this._scrollPositionRecord)}function ha(a){var b=this;a||b._calculateSearchViewHeight()}function ia(){var a=this;a._calculateSearchViewHeight()}function ja(){Na.isActive()&&G.back()}function ka(b){a.scrollTo(0,b||0)}function la(a){return"not-moved"===a.getAttribute("data-search-relation")}function ma(e){e.preventDefault(),e.stopPropagation()}function na(a){var b,c=f.getElementById("boxPage");c&&(b=c.style,a?(b.visibility="",c.setAttribute("aria-hidden","false"),N()||(b.pointerEvents="",p(Ga,function(a){a.removeEventListener("click",ma,!1)}))):(b.visibility="hidden",c.setAttribute("aria-hidden","true"),N()||(b.pointerEvents="none",p(Ga,function(a){a.addEventListener("click",ma,!1)}))))}function oa(){return f.getElementsByClassName("toolbar-search-input")[0]}function pa(a){return f.activeElement===a}function qa(a){h.switchClass(this,a,"__in-progress")}function ra(a,b){function c(){f||(null!=d?l.insertBefore(b,d):l.appendChild(b))}var d,f=la(b),g=b.getAttribute("data-from"),k=b.getAttribute("data-search-scope"),l=b.parentNode,m=b.form,n=m.getElementsByClassName(Ba)[0],o=b.value||"",p=i.parentBySelector(b,".input-text"),q=null!==p,s=f&&q;return a._model.onChanged("query",$,b),s&&a._model.onChanged("inLooking",qa,p),q&&h.addClass(p,"__active"),f||(b.blur(),d=b.nextSibling,l.removeChild(b)),{form:m,haveOutsideInput:f,input:f?b:null,cancel:n,inputValueOnInitStart:o,searchMeta:{input:b,from:g,searchScope:k,toggleClass:!N()||"sidebar"!==g&&"toolbar"!==g?null:"messaging"},onend:function(){c(),pa(b)&&b.blur(),q&&h.removeClass(p,"__active"),a._model.offChanged("query",$,b),s&&a._model.offChanged("inLooking",qa,p),a._cancelled&&(b.value=o)},onsubmit:function(a,d){c(),b.value=a,m.action=d,I.submitForm(m,b)}}}function sa(e){function a(){var a=e.relatedTarget&&h.hasClass(e.relatedTarget,Ba);return a||!h.hasClass(Ea,ya)}var b=e.target,c=b.form;c&&(h.switchClass(c,e.type.toLowerCase()==Oa,"__input-focused"),h.hasClass(b,Aa)||(h.addClass(c,"__input-active"),l.layoutChanged())),"blur"==e.type&&(a()||setTimeout(function(){l.updated()},500))}function ta(a){var b,c,d=a.form,f=a.getAttribute("data-from"),g=a.getAttribute("data-search-scope"),i=null!==g;d&&(c=d.querySelector(".search_input_stub"),c&&(b=a.parentNode,l.init.attach(function(a){(a.from===f||i&&a.searchScope===g)&&h.addClass(b,"__show-stub")}),l.cancelled.attach(function(a){(a.from===f||i&&a.searchScope===g)&&h.removeClass(b,"__show-stub")}),l.queryChange.attach(function(a){(a.from===f||i&&a.searchScope===g)&&(c.value=a.query)}),c.addEventListener("click",function(){l.returnToSearch()},!1)))}function ua(){var a;p(f.getElementsByClassName("search_input"),function(b){b.addEventListener(Oa,sa,!1),a||(a="ondeactivate"in b?"deactivate":"blur"),b.addEventListener(a,sa,!1),ta(b)}),p(f.getElementsByClassName(za),function(a){i.parentBySelector(a,"#live-search")||a.addEventListener("checkbox"===a.type?"click":"change",Ma)})}var va,wa="__loading",xa="active",ya="search-on",za="search_mod",Aa="js-search",Ba="js-search_cancel",Ca="__OK_",Da="__",Ea=g,Fa="ontouchstart"in Ea?"touchstart":"mousedown",Ga=[],Ha=["app"];O.prototype={handleEvent:function(e){var a=this,b=e.type;e.target;switch(b){case"click":P(a,e);break;case"keyup":R(a,e);break;case"input":case"change":S(a,e);break;case"focus":T(a,e);break;case"blur":case"touchstart":case"mousedown":V(a,e);break;case"submit":U(a,e)}},start:function(b){var c=this,d=c._model;if(!d.get("isActive")){var f=c._searchLayerSearchInput;d.set("sessionData",b),c._saveFocus=!1,a.addEventListener("keyup",c,!1),ea(c,c._searchLayerResults),aa(c,f),ba(c,c._searchLayerCancelButton),null===c._focusedSearchInput&&(c._focusedSearchInput=f);var g=c._model.get("sessionData").searchMeta.toggleClass;return g&&h.removeClass(Ea,g),d.onChanged("query",$,f),d.onChanged("query",_,c),d.set("query",""),na(!1),c._scrollPositionRecord=t.recordScroll(),c._returnScrollPosition=ga.bind(c),t.setOverflow(),ka(),d.set("isActive",!0),N()?c._focusedSearchInput.focus():(setTimeout(function(){c._focusedSearchInput&&c._focusedSearchInput.focus()},J.keyboard.closeTimeout),c._focusedSearchInput.focus()),c._setSearchInputCursorToEnd(c._focusedSearchInput),d.synced("inLooking",ha,c),w.onChanged("heightBySidebar",ia,c),l.init(d.get("sessionData").searchMeta),z.request(function(){t.resetOverflow()}),setTimeout(function(){ka(-500)},400),t.resize.attach(W,c),c}},end:function(b,c){var d=this,f=d._model;if(f.get("isActive")){var g=d._searchLayerSearchInput,i=d._searchLayerCancelButton,k=d._searchLayerResults,m=f.get("sessionData").searchMeta;f.offChanged("query",_,d),f.set("query",""),a.removeEventListener("keyup",d,!1),fa(d,k),ca(d,g),da(d,i),f.offChanged("query",$,g),pa(d._focusedSearchInput)&&d._focusedSearchInput.blur(),d._cancelled=b||!1,f.set("sessionData",null),f.set("isOutsideInputActive",!1),h.clear(d._searchLayerResults),na(!0),L.height.revert(),f.set("isActive",!1);var n=m.toggleClass;return n&&h.addClass(Ea,n),f.offChanged("inLooking",ha,d),w.offChanged("heightBySidebar",ia,d),d._scrollPositionRecord&&z.request(function(){z.request(d._returnScrollPosition)}),c!==!1&&ja(),l.cancelled(m),t.resize.detach(W,d),d}},changeSearchInitial:function(a){var b=this,c=b._model;return c.set("sessionData",ra(b,a)),a.value=c.get("query"),a.focus(),b._calculateSearchViewHeight(),b},query:function(a){var b=this,c=b._model;return c.get("isActive")&&(c.set("query",a),b._submitRequest()),b},_setSearchInputCursorToEnd:function(a){var b=a.value;return b&&b.length&&(a.selectionStart=a.selectionEnd=b.length),this},_notifyFormSubmission:function(){var a=this,b=a._model;if(b.get("sessionData").onsubmit){var c=b.get("query"),d=a._createQueryUrl(a._searchLayer,c);b.get("sessionData").onsubmit(c,d)}return a},_createQueryUrl:function(a,b){var c=this,d=c._endpointUrl;if(!d)return null;var f=c._serializeForm(a);return n(f,function(a,b){d=d.replace(Ca+b+Da,encodeURIComponent(f[b]))}),d.replace("__OK_QUERY__",encodeURIComponent(b))},_serializeForm:function(a){return o.serialize(a.getElementsByClassName(za))},_submitRequest:function(){var b=this,c=b._model,d=c.get("query").trim();return b._resultsRequestTask&&(b._resultsRequestTask.abort(),b._resultsRequestTask=null),-1!==b._searchTimeout&&a.clearTimeout(b._searchTimeout),d&&d.length?(c.set("inLooking",!0),b._searchTimeout=a.setTimeout(function(){if(c.get("isActive")){var a=x.request(b._createQueryUrl(b._searchLayer,d));a.__searchDebugQery=d,b._resultsRequestTask=a,a.header("Content-Type","application/x-www-form-urlencoded"),a.header("X-Live-Search","1");var f=c.get("sessionData").searchMeta;f.from&&a.header("X-Search-From",f.from),a.then(function(a){var d,f=a.getResponseHeader("X-Live-Query");f&&(d=decodeURIComponent(f)),d&&d!==c.get("query").trim()||(b._resultsRequestTask=null,b._searchLayerResults.innerHTML=this.response(),l.updated(d))}).anyway(function(){c.set("inLooking",!1)}).withToken().send()}b._searchTimeout=-1},b._options.searchThreshold||0),b):(h.clear(b._searchLayerResults),b._endpointUrl=b._defaultEndpointUrl,c.get("inLooking")?c.set("inLooking",!1):b._calculateSearchViewHeight(),l.updated(""),b)},_calculateSearchViewHeight:function(a){var b,c=this,d=0;if(b=X(c),a){var f=i.parentBySelector(a,".a-menu");if(f){var g=f.getElementsByClassName("a-menu_content_w")[0];if(g){var k=h.getTotalOffsetTop(g);p(g.children,function(a){k+=a.offsetHeight}),k>b&&(b=k)}}}return z.request(function(){w.get("heightBySidebar")&&B.isInit&&(d=B.sidebar.getOffsetHeight()),d>b&&(b=d),N()||(C.blockHasStub(c._searchLayerResults)&&D.processed.attachOnce(function(){var a=X(c);d>a&&(a=d),Y(c,a)}),Y(c,b))}),c}};var Ia,Ja,Ka,La,Ma={handleEvent:function(e){this._handleEventAtTarget(e.target)},_handleEventAtTarget:function(a){var b=a.form;if(null!==b){var c=b.querySelector(".search_input");if(c){var d=c.value.trim();d&&d.length>0&&I.submitForm(b,c)}}}},Na=F.create("search");c.initLiveSearch=E.create({init:function(c){function d(){n._model.get("isActive")&&null!==n._focusedSearchInput&&n._focusedSearchInput.focus()}function g(a){var b,c,d,f,g=!0;if(!h.hasClass(a,Aa))return!1;if(b=a.getAttribute("data-from"),c=a.getAttribute("data-search-scope"),d=oa(),n._model.get("isActive")){if("sidebar"!==b&&("toolbar"!==b||n._outsideSearchInput===a))return!1;n.end(!0,!1),g=!1}else if(w.get("toolbarSearch.active")&&d&&d!==a&&"global"===c)return a=d,a.focus(),!1;if(Ia&&Ia!==a)return a.blur(),!1;if(f=a.value,n.start(ra(n,a)),g){var i=a.getAttribute("data-uid")||"searcInput"+Date.now();a.setAttribute("data-uid",i),Na.go({query:f,inputUid:i})}return f&&f.length&&n.query(f),!0}function i(a,c){n&&(a===b||a)&&n.end(!0,c)}var n,o=f.getElementById("live-search");o&&(va=f.body,n=new O(o,c),w.onChanged("workWithOutsideInputs",function(a){var b=this,c=b._model;c.get("isActive")&&(a||b._focusedSearchInput===b._searchLayerSearchInput?a&&null!==b._outsideSearchInput&&(b._calculateSearchViewHeight(),c.set("isOutsideInputActive",!0),b._outsideSearchInput.focus()):(b._calculateSearchViewHeight(),c.set("isOutsideInputActive",!1),b._searchLayerSearchInput.focus()))},n),p(Ha,function(a){p(f.getElementsByClassName(a),function(a){Ga.push(a)})}),a.onpageshow=function(e){e.persisted&&(n.end(),ja())},l.returnToSearch.attach(d),K.init(),w.onChanged("toolbarSearch.active",function(a){var b=this,c=b._model;a&&c.get("isActive")&&"global"===c.get("sessionData").searchMeta.searchScope&&b.changeSearchInitial(oa())},n),s.rendering.attach(function(e){i(!0,!1)}),Na.deactivated.attach(function(e){i(!e.current.isAjaxDialog,!0)}),Na.activated.attach(function(e){if(!n._model.get("isActive")){var a=e.state,b=a.query,c=f.querySelector(["[data-uid=",a.inputUid,"]"].join(""));c&&(n.start(ra(n,c)),n.query(b))}}),Ja={handleEvent:function(e){var a=e.target;switch(e.type){case Fa:Ia=a;break;case"click":if(g(a))return e.preventDefault(),!1;break;case"focus":if(g(a))return e.preventDefault(),!1;break;case"keyup":case"input":g(a)}}},Ka=k.ie?"keyup":"input",La={click:Ja},La[Fa]=Ja,La[Ka]=Ja,f.activeElement&&g(f.activeElement),m.opening.attach(function(){var a=n._focusedSearchInput;n._model.get("isActive")&&pa(a)&&(n._saveFocus=!0,a.blur())}),m.closed.attach(function(){var a=n._focusedSearchInput;n._model.get("isActive")&&n._saveFocus&&null!==a&&a.focus()}),m.open.attach(function(){N()&&n.end(!0)}),l.forceCancel.attach(function(){n.end(!0)}))},update:function(a){q("search",f.querySelectorAll(".js-search"),function(b){A.listen(b,La);var c=b.form;(!c||p(c.getElementsByClassName(za),function(a){var b;if("checkbox"===a.type){if(b=a.getAttribute("data-init-val"),"on"===b!==a.checked)return Ma._handleEventAtTarget(a),!1;a.addEventListener("click",Ma,!1)}else if("select-one"===a.type){if(b=a.getAttribute("data-init-val"),b!==a.options[a.selectedIndex].value)return Ma._handleEventAtTarget(a),!1;a.addEventListener("change",Ma,!1)}}))&&(!a||a.activateOnFocus||b.hasAttribute("data-work-on-focus"))&&b.addEventListener("focus",Ja,!1)})}});var Oa="focusin";H.domLoaded.then(ua)}(c.e,c.ct,c.m,c.p,c.ab,c.ah,c.ai,c.g,c.cu,c.f,c.bq,c.am,c.aa,c.aj,c.bm,c.be,c.ag,c.cc,c.as,c.cw,c.cv,c.v,c.ch,c.ca,c.l,c.ad,c.z,c.cx,c.ar,c.cy)||a),c.da=d.hgLY79g||(d.hgLY79g=function(a,b,c,d,g,h){function i(){var a=c(f.cookie.split("; "),function(a){var b=a.indexOf("=");if(-1!==b){var c=a.substring(0,b);if("hints"==c)return a.substring(b+1)}});return"string"==typeof a?a.split(","):[]}function k(a,b){var c=i();if(-1===c.indexOf(a)){c.push(a);var d=new Date;d.setDate(d.getDate()+b),f.cookie="hints="+c.join(",")+"; expires="+d.toUTCString()}}function l(e){e.preventDefault();var a=g.parentBySelector(this,o);b.addClass(a,p),k(a.getAttribute(q),n)}var m,n,o=".hint_body",p="closed",q="data-hint";a.initHints=h.create({init:function(){m=i()},update:function(a){n=a.cookieAge,d("hint",f.querySelectorAll(o),function(a){var c=a.getAttribute(q);if(c&&-1===m.indexOf(c)){b.removeClass(a,p);var d=a.querySelector(".pbtn");d&&d.addEventListener("click",l,!1)}})}})}(c.e,c.m,c.f,c.bq,c.p,c.v)||a),c.db=d.oQaaGMg||(d.oQaaGMg=function(){return{portrait:function(){return a.innerWidth<a.innerHeight},landscape:function(){return a.innerWidth>a.innerHeight}}}()||a),c.dc=d.iPG21BQ||(d.iPG21BQ=function(){function b(a){return"auto"===a||"scroll"===a}var c="overflow",d="overflowX",f="overflowY";return function(g,h){var i=a.getComputedStyle(g);return"x"===h?b(i[d]):"y"===h?b(i[f]):b(i[c])||b(i[d])||b(i[f])}}()||a),c.dd=d.sTkKGPg||(d.sTkKGPg=function(b,c,d,f){function g(a){a.isSwiped=!1,a.onSwipeEnd&&a.onSwipeEnd(a.pointerStartX-a.pointerLastX,a.pointerStartX)}function h(a){return c.portrait()&&a>x&&L-a>x}function i(a){return c.landscape()&&a>z&&M-a>z}function k(a){return!E||h(a)||i(a)}function l(a,b,c){for(var f=!1;b!==a;){if(f=d(b,"x"),!b.hasAttribute(G)&&f&&!(0>c&&0===b.scrollLeft))return!0;b=b.parentNode}return!1}function m(a,b){return!f.findParent(a,n,b)}function n(a){return a.hasAttribute(H)}function o(b,e){var c,d,f,g,h,i=1==e.touches.length?e.touches[0]:null;b.isDetect||(b.isBlocked=e.defaultPrevented),b.isTouched&&!b.isBlocked&&!e.defaultPrevented&&i&&(g=b.pointerStartX,c=i.clientX,b.isDetect?d=c-b.pointerLastX:(d=g-c,f=Math.abs(d),h=Math.abs(b.pointerStartY-i.clientY),b.isSwiped=B>h&&m(e.target,b.node)&&f>=b.range&&f>=h*F&&!l(b.node,e.target,d)&&k(g),b.isSwiped&&(b.isClickBlock=!0,b.onSwipeStart&&b.onSwipeStart(d,g)),b.isDetect=!0),b.isSwiped&&(b.pointerLastX=c,b.onSwipeMove&&b.onSwipeMove(d,g))),b._lastMoveTimeoutId=a.setTimeout(b._lastMoveTimeoutHandler,C)}function p(){var a=this,e=a._moveEventCache;a._moveTimeoutId=-1,a._moveEventCache=null,o(a,e)}function q(){var a=this;a._lastMoveTimeoutId=-1,a.isSwiped&&a.stop()}function s(b){var c=b._lastMoveTimeoutId;-1!==c&&(a.clearTimeout(c),b._lastMoveTimeoutId=-1)}function t(){var a,b=this,e=b._startEventCache,c=e.touches;b._startTimeoutId=-1,b._startEventCache=null,b.isTouched=!1,b.isBlocked=!1,b.isDetect=!1,!e.okSwipeable&&e.defaultPrevented||1!==c.length||(b.isTouched=!0,a=c[0],b.pointerStartX=a.clientX,b.pointerStartY=a.clientY)}function v(b){var c=b._startTimeoutId;-1!==c&&(a.clearTimeout(c),b._startTimeoutId=-1)}function w(a,b,c,d,f){var g=this;g.node=a,g.range=f||A,g.isMoveAdded=!1,g.isDetect=!1,g.isSwiped=!1,g.isTouched=!1,g.isBlocked=!1,g.isIgnoreMovePreventDefault=!1,g.pointerStartX=0,g.pointerLastX=0,g.pointerStartY=0,g.onSwipeMove=c||null,g.onSwipeStart=b||null,g.onSwipeEnd=d||null,g._moveTimeoutId=-1,g._moveTimeoutHandler=p.bind(g),g._moveEventCache=null,g._startTimeoutId=-1,g._startTimeoutHandler=t.bind(g),g._startEventCache=null,g._lastMoveTimeoutId=-1,g._lastMoveTimeoutHandler=q.bind(g)}var x=12,z=14,A=5,B=30,C=15,D=1,E=b.iOS,F=E?b.iOSVersion<8?1.7:1.85:1.1,G="data-js-swipe-ignore-scroll",H="data-js-swipe-ignore",I="touchstart",J="touchmove",K=screen,L=K.width,M=K.height;return w.prototype={handleEvent:function(e){var b=this;switch(e.type){case I:v(b),b._startEventCache=e,b._startTimeoutId=a.setTimeout(b._startTimeoutHandler,D);break;case J:s(b),b.isSwiped?o(b,e):-1===b._moveTimeoutId&&(b._moveEventCache=e,b._moveTimeoutId=a.setTimeout(b._moveTimeoutHandler,D))}},enable:function(a){var b=this,c=b.node;return a?(c.addEventListener(I,b,!1),c.addEventListener(J,b,!1)):(c.removeEventListener(I,b,!1),c.removeEventListener(J,b,!1)),b},stop:function(){var a=this;return a.isSwiped&&g(a),a},destroy:function(){}},{create:function(a,b,c,d,f){return new w(a,b,c,d,f)}}}(c.ab,c.db,c.dc,c.p)||a),c.de=d.sxqsnDQ||(d.sxqsnDQ=function(b,c,d,f,g,h){function i(b){function c(a,b){var c=g.logClientEvent;c&&c(a,b)}var d,g=a,i=g.document,k=i.body,l="data-js-swipe-ignore-scroll",m=15,n=10;b.sidebarContent.setAttribute(l,""),d=f.create(k,null,null,function(a){b.isOpen()&&a>=n?b.close():!b.isOpen()&&-a>=m&&(c("sidebar",["swipeOpen"]),b.open())}),h.synced("enabled",d.enable,d)}function k(){g.isInit&&g.options.isSwipeEnabled&&i(g.sidebar)}k()}(c.e,c.m,c.p,c.dd,c.as,c.ak)||a),c.df=d.t8nt8Tw||(d.t8nt8Tw=function(a,b,c,d,g,h){function i(){var b=m;m&&(m.checked=!0,m=null),o&&(a.removeClass(o,l),n.style.marginTop="",o=n=null),b&&h.close.trigger(b)}function k(c,d){var f=b.parentBySelector(c,".a-menu");g.request(function(){var b=c.parentNode.getElementsByClassName("a-menu_content")[0],g=b.offsetHeight;g+b.getBoundingClientRect().top>d.getBoundingClientRect().top&&(b.style.marginTop=-g+"px",a.addClass(f,l),o=f,n=b)})}var l="__open-up",m=null,n=null,o=null;d.attach(function(a){var c=a.target;if(null!==c){var d=b.parentBySelector(c,".a-menu.toggle");null!==d&&b.isChildOf(m,d)&&i()}}),c.clickEvent.attach(function(e){var c=e.target;if(!a.hasClass(c,"tgl-cbox"))if(a.hasClass(c,"a-menu_open")){var d=f.getElementById(c.getAttribute("for"));if(d!==m&&i(),h.open.trigger(c),d.checked){m=d;var g=f.getElementsByClassName("layout-bottom-panel")[0];g&&k(d,g)}}else a.hasClass(c,"a-menu_close")?(setTimeout(i,10),e.preventDefault()):m&&!b.parentBySelector(c,".a-menu.js-noAutoClose")&&setTimeout(i,10)})}(c.m,c.p,c.bf,c.az,c.ag,c.cy)||a),c.dg=d.pULNjqA||(d.pULNjqA=function(){var a="hidden",b="visibilitychange";return a in f||(a="webkitHidden",b=a in f?"webkit"+b:a=null),{isHidden:function(){return a&&f[a]},visibilityChangeEventName:b}}()||a),c.dh=d.tRZxtoA||(d.tRZxtoA=function(a,c,d,g,h){function i(e){e&&h.allowDefault(e),a.addClass(k.node,"__closed"),k.config&&(k.manualCloseTimeoutId=setTimeout(function(){k.node&&(f.body.removeChild(k.node),k.node=null)},k.config.animationTime))}d.put("toolbar-counters",{pushParse:function(e){e.envelope.updateLink=e.domNode.getAttribute("update-link")},pushReceived:function(e){var a=e.envelope.updateLink;if(a){var b,d=e.envelope.targetId;if(d)b=c.parentBySelector(f.getElementById(d),".ntf");else{var g=f.querySelector(e.envelope.targetSelector);g&&(b=g.previousSibling)}b&&(b.href=a)}},pushProcessed:function(e){var b=e.envelope.targetId;b&&a.removeClass(f.getElementById(b),"dsn")}});var k={config:b,node:b,autoCloseTimeoutId:b,manualCloseTimeoutId:b};d.put("toolbar-red-link",{pushParse:function(e){var a=e.domNode;clearTimeout(k.manualCloseTimeoutId),clearTimeout(k.autoCloseTimeoutId),k.node&&(f.body.removeChild(k.node),k.node=null),k.config={animationTime:parseInt(a.getAttribute("data-animationTime"))||300,shownTime:parseInt(a.getAttribute("data-shownTime"))||15e3}},pushReceived:function(e){-1==e.envelope.content.indexOf("p-block")&&(e.envelope.targetId=e.envelope.targetSelector=null)},pushProcessed:function(){var a=k.config.shownTime;k.node=f.getElementsByClassName("notification-top")[0],logClientEvent("red.link.push-promo.shown"),a>0&&(k.autoCloseTimeoutId=setTimeout(function(){i(null)},a))}}),g.addFuncHandler("close-topPush",{tap:function(e){clearTimeout(k.autoCloseTimeoutId),i(e)}}),g.addFuncHandler("close-log-topPush",{tap:function(){logClientEvent("red.link.push-promo.close"),clearTimeout(k.autoCloseTimeoutId),i(null)}})}(c.m,c.p,c.cm,c.ad,c.r)||a),c.di=d.c5t4gVQ||(d.c5t4gVQ=function(b,c,d,g,h,i,k,l,m){function n(){x&&!h.aborted&&x.abort()}function o(){m.isHidden()?A=!0:(!x||x.done)&&(p(z),G=0,A=!1,logClientEvent("push.recovered.by.visibility"))}function p(a){function c(){this.response()&&(B=!0,b.processAjaxEnvelope(this.response()),logClientEvent("push.render.success"))}function d(){if(g=!0,!this.aborted){var a=this;setTimeout(function(){var b=a.xhr.status;b&&b>0&&logClientEvent("push.connection.error",[b]),p(-1)},F),D>F&&(F*=2)}}function f(){if(g||this.aborted||q(this.xhr))clearInterval(v);else{var a=this.xhr.getResponseHeader("push.state.id");if(!A){if(a==z){if(G++,G>=E)return clearInterval(v),void logClientEvent("push.connection.dummy")}else z=a,G=0;p(a)}F=C}}var g=!1;navigator.cookieEnabled&&(x=h.request(s(w,a),"POST"),x.xhr.setRequestHeader("need.new.stateId",B?"1":"0"),x.then(c,d).anyway(f).withToken().send(),t=Date.now(),B=!1)}function q(a){return"1"==a.getResponseHeader("push.stop")||"1"==a.getResponseHeader("Refresh-Requested")}function s(b,c){var d=a.location.search,f="/push?st.cmd=PushGatewayCtrl&reqBlocks=["+b+("]&p_sId="+c);-1!=d.indexOf("st.cmd")&&(d=d.substring(d.indexOf("&")),-1!=d.indexOf("&_prevCmd")&&(d=d.substring(0,d.indexOf("&_prevCmd"))),f+=d);var h={openPushChannelUrl:f};return g.collectPushRequestParams(h),h.openPushChannelUrl}var t,v,w,x,z,A,B,C=500,D=4e3,E=25,F=C,G=0;k.adBannerClicked.attach(n),b.initCometPush=l.create({init:function(a){if(m.visibilityChangeEventName)f.addEventListener(m.visibilityChangeEventName,o);else if(a.heartbeatRecoveryEnabled){var b=a.asyncTimeout+a.heartbeatRecoveryLimit;v=setInterval(function(){var a=Date.now();a-t>b&&(p(w,z),logClientEvent("push.recovered.by.heartbeat"))},a.heartbeatRecoveryInterval)}},dispose:function(){n()},lateUpdate:function(a){a.maxJsErrorTimeout&&(D=a.maxJsErrorTimeout),a.maxDummyReqCount&&(E=a.maxDummyReqCount),w=a.renderedBlocks,z=a.pushStateId,p(z)}})}(c.e,c.m,c.p,c.cm,c.be,c.bu,c.u,c.v,c.dg,c.dh)||a),c.dj=d.azlWUbg||(d.azlWUbg=function(a,b){function c(){return this.ajaxTask.send(),this}function d(){return this.ajaxTask.withToken(),this}function f(){return this.ajaxTask.abort(),this}function g(a){var b=a.responseText,c=this.jsonTask;b?c.resolve(JSON.parse(b),a):c.reject()}function h(){this.jsonTask.reject()}return{request:function(i,k,l){var m=a.start(),n=b.request(i,k,l).then(g,h);return n.jsonTask=m,m.ajaxTask=n,m.withToken=d,m.send=c,m.abort=f,m}}}(c.i,c.be)||a),c.dk=d.cFbigA||(d.cFbigA=function(b,c,d,g,h,i,k,l,m,n,o){function p(){function b(a){var b=[];return d.findParent(a,function(a){var c,d=a.getAttribute("data-log-click");if(d){try{c=JSON.parse(d)}catch(a){}c&&b.push(c)}}),b}function o(e){var c,d=e.target,l=d.form,o=l?l.action:d.href,p=o&&k.see(o);if(o){if(g.hasClass(d,"clnk")){var q=d.style;q.display="none",c=f.elementFromPoint(e.clientX,e.clientY),q.removeProperty("display")}var s=b(c||d);if(!h.isEmpty(s)){var t=JSON.stringify(s),v=t.length;if(v>1500)return void(a.okSjse&&alert("ClickLog JSON is too long "+v));var w={_clickLog:t};l||p.appHook?n.request("/dk?st.cmd=clickLog&"+i.formatParams(w),"POST").send():(p.internal&&(d.href=i.insertParams(o,w)),a.okSMod=function(){return a.okSMod=null,i.formatParams(w,"&")},m.preview.attachOnce(function(b){-1!=b.url.indexOf("_clickLog")&&(a.okSMod=null)}))}}}c.clickPreview.attach(o),l.impl={previewClick:o}}b.initClickLog=o.create({init:p})}(c.e,c.bu,c.p,c.m,c.cg,c.h,c.bd,c.bb,c.be,c.dj,c.v)||a),c.dl=d.ao0C0aQ||(d.ao0C0aQ=function(b,c,d,g,h,i,k,l,m){
function n(a){N=b.checkPixels,a&&(M=g.config=a)}function o(b){function c(){H()||(K=k.calc().scrollTop)}b=b||{promoClass:"adv_w",shownPart:90,recalculate:!1,callback:null};var d=this;d.options=b,d.blockModelCollection=[],d.collectAndCount(),k.changed.attach(m(A.bind(d),350)),b.kineticScroll&&(a.navigator.msPointerEnabled?f.addEventListener("MSPointerDown",c,!1):f.addEventListener("touchstart",c,!1));var h=m(s,600);if(k.resize.attach(function(){h(d.blockModelCollection)}),b.recalculate&&"complete"!==f.readyState)for(var i=f.getElementsByTagName("IMG"),l=i.length;l--;){var n=i[l];0===n.offsetHeight&&n.addEventListener("load",function(){h(d.blockModelCollection)},!1)}g.onShow.attach(E),g.videoPixelRequest.attach(J)}function p(){this.collectPromoBlocksData(),this.countVisibleBlocks()}function q(){for(var a=this.blockModelCollection,b=a.length;b--;){var c=a[b];c.actionHistory={}}}function s(a){var b,c,d,g,h=k.calc(),i=h.scrollTop;h.scrollTop+=(b=f.body)?b.clientTop:0;for(var l=a.length;l--;)c=a[l],g=c.node,g.parentNode&&!c.isShownOnScroll&&(d=g.getBoundingClientRect(),t(c,d)&&(c.top=Math.round(d.top)+i,c.bottom=Math.round(d.bottom)+i))}function t(a,b){var c=a.top-b.top;return Math.abs(c)>20}function v(){var a=this,b=k.calc(),d=b.scrollTop,g=a.options.promoClass;l(f.querySelectorAll("."+g),function(b){var f=w(b,d);f.bannerType;a.blockModelCollection.push(f),f.pixels?(M.jsonPixels&&!f.isShown&&(F(f,V.SHOWN,!1),f.isShown=!0),b.okBlockModel=f,b.addEventListener("click",function(e){f.event=e,z.call(f)},!1)):b.addEventListener("click",function a(e){F(f,V.CLICK,!0),b.removeEventListener("click",a)},!1),c.removeClass(b,g)})}function w(a,b){return{node:a,top:a.getBoundingClientRect().top+b,height:a.offsetHeight,pixels:M.jsonPixels?x(a):a.getElementsByClassName("adv-px"),actionHistory:{},isShown:!1,isShownOnScroll:!1,bannerType:a.getAttribute(T)||a.parentElement.getAttribute(T)||"typeNotFound"}}function x(a){var b=a.getAttribute(P),c=0;if(b){var d=JSON.parse(b);if(Object.keys)c=Object.keys(d).length;else for(var f in d)c++;return c>0?d:null}}function z(){var a,b=this,e=b.event,c=e.target,f=e.currentTarget.parentNode,g={};c&&(c.getAttribute(O)||(c=d.findParent(c,function(a){return a.getAttribute(O)},f)),g=c?JSON.parse(c.getAttribute(O)):g.action=X,a=g.action,a&&E(b,a))}function A(){var a=this,b=a.options,c=b.callback,d=[];l(a.blockModelCollection,function(b){!b.isShownOnScroll&&a.isIntoView(b)&&(d.push(b),b.isShownOnScroll=!0)}),d.length&&E(d,M.jsonPixels?W:null),c&&c(),K=null}function B(a){var b,d,f,g,h,i=this,l=k.calc(),m=l.height,n=l.scrollTop;return c.hasClass(a.node,"slider_i")?void 0:(b=a.height,d=b*(i.options.shownPart/100),f=b-d,H()?n>K?(g=K,h=n+m):(g=n,h=K+m):(g=n,h=n+m),a.top+f>=g&&a.top+d<=h)}function C(a){l(a,function(a){(new Image).src=a})}function D(a,b,c){var d=a.getAttribute(b);c&&Y.push(a),d&&((new Image).src=d)}function E(a,b){if(Array.isArray(a))for(var d=0,f=a.length;f>d;d++)F(a[d],b,!1);else a&&F(a,b,!1);if(!M.jsonPixels)for(var g=0,h=Y.length;h>g;g++)c.remove(Y[g])}function F(a,b,c){var d,f=a.node||a,h=a.pixels,i=!0;if(M.jsonPixels)b&&b!==X&&(c&&a.actionHistory[b]||(M&&I(f,b),h&&(d=h[b])&&(C(d),a.actionHistory[b]=!0)));else for(var j=0,k=h.length;k>j;j++){var l=h[j],m=l.getAttribute(R);b&&b==m?D(l,S,!1):m==W&&(G(l,a),M.log&&i&&(g.log("view",f.getAttribute(T)),i=!1))}}function G(a,b){var d=c.hasClass(a,"adv-px_sidebar"),g=c.hasClass(f.body,"__sidebar-active");!d||g?D(a,S,!0):d&&(b.isShownOnScroll=!1)}function H(){return"undefined"!=typeof K&&null!==K}function I(a,b){b=Z[b],b&&d.findParent(a,function(a){var c=a.getAttribute(T);return c&&c.length?(g.log(b,c),!0):void 0})}function J(a){var b=a.action;if(b instanceof Array)for(var c=b.length;c--;)F(a.data,b[c],a.norepeat);else F(a.data,b,a.norepeat)}var K,L,M,N,O="data-model",P="data-pixel-map",R="data-type",S="data-src",T="data-btype",U="",V=g.bannerActionType,W=V.SHOWN_ON_SCROLL,X=V.IGNORE,Y=[],Z={};Z[V.CLICK]="click",Z[V.JOIN_GROUP]="click",Z[V.LINK_EXT]="click",Z[V.AUTHOR_CLICK]="click",Z[V.OPEN_APP]="click",Z[V.PLAY_VIDEO]="click",Z[V.COMMENT]="click",Z[V.RESHARE]="click",Z[V.SHOWN_ON_SCROLL]="view",b.monitorAds=i.create({init:function(a){n(a),h.envelope.applied.attach(function(e){var a=e.operation;a&&a.match(/\b(append|prepend)\b/gi)&&(L.collectPromoBlocksData(),s(L.blockModelCollection),!M.jsonPixels&&N&&setTimeout(function(){var a=e.container;a&&N(a,"adv-px",!1)},100))}),U=a.jsonPixels?"js-pixelsMap":"js-advRoot",L=new o(M)},update:function(a){n(a),L.collectAndCount(),L.clearActionsHistory()},dispose:function(){L.blockModelCollection.length=0}}),o.prototype={collectPromoBlocksData:v,countVisibleBlocks:A,isIntoView:B,collectAndCount:p,clearActionsHistory:q},g.impl={handleObservableBlocks:function(e,a){if(U){var b=d.parentBySelector(a,"."+U);if(b){var c=b.okBlockModel;c.event=e,z.call(c)}}},merge:function(a,b){var c=a.okBlockModel;if(c){c=c.pixels;for(var d in b)c.hasOwnProperty(d)||(c[d]=b[d])}}}}(c.e,c.m,c.p,c.w,c.am,c.v,c.aa,c.f,c.bh)||a),c.dm=d.cOiGujw||(d.cOiGujw=function(a){if(a.android&&!a.chrome){var b=f.createElement("style");f.head.appendChild(b),b.sheet.insertRule("#events-list{-webkit-animation:bugfix infinite 5s;}",0)}}(c.ab)||a),c.dn=d.skKXvUg||(d.skKXvUg=function(b){var c,d;a.setImmediate?c=function(b){a.setImmediate(b)}:a.postMessage?(d="m.ok.ru-setImmediate_"+Math.random(),c=function(){a.postMessage(d,"*")},a.addEventListener("message",function(e){e.data===d&&f.processingCallbacks()})):c=function(a){setTimeout(a,0)};var f=b.create(c);return f.getCallCallbacksArgumentsProvider()}(c.af)||a),c.dp=d.anmqBZA||(d.anmqBZA=function(a){return{userSettingChangeVisibility:a.create()}}(c.q)||a),c.dq=d.aCzpLig||(d.aCzpLig=function(){function a(a,b){return b.toUpperCase()}var b=/\.([a-z])/g;return function(c){return c.replace(b,a)}}()||a),c.dr=d.aClBajg||(d.aClBajg=function(b,c,d,g,h){function i(){var b=a.pageCtx;!A&&b&&(A=b.actionBusUrl,b.actionBusPost&&(F="POST"),b.actionBusUrl="")}function k(){v={},w={},x={},E()}function l(a){g.copy(a,B)}function m(){z||(z=setTimeout(p,C))}function n(){var b,c=a.localStorage,d=a.sessionStorage,g="okTime",h=d&&d[g]||c&&c[g];if(h){h=JSON.parse(h);for(b in h)h.hasOwnProperty(b)&&(f.cookie=b+"="+h[b]+";path=/")}}function o(){var a={"st.actions":JSON.stringify(v),_i_loc_rdr:1};n(),i();var b=A+h.formatParams(a,"&");return d.request(b,F).withToken().send()}function p(){z=null;var a=o();a.oneTimeHandlers=w,a.oneTimeFailHandlers=x,a.then(q,s),k()}function q(b){var c=this.oneTimeHandlers,d=this.oneTimeFailHandlers,f=null,g=b.error;if(g){for(var h in d)d.hasOwnProperty(h)&&d[h](g);f=g.error?[g.error]:null}else for(var i in b)if(b.hasOwnProperty(i)){var k=c[i]||B[i],l=b[i];if(k){var m=l&&l.error;if(m){var n=d[i];n&&n(m),(f||(f=[])).push(m)}else k(l)}else a.okSjse&&alert("Not handled: "+i)}f&&D({errors:f});var o=this.ajaxTask.xhr.getResponseHeader("X-Sec-Token");o&&(A=A.replace(/\&STKN\=[^\&]+/gi,"&STKN="+o))}function s(){var a=this;q.call(a,{error:"error.no.response"})}function t(a,b){var d=c.start();return a in v?E.attachOnce(function(){d.join(t(a,b))}):(v[a]=b,w[a]=d.resolve.bind(d),x[a]=d.reject.bind(d),m()),d}var v,w,x,z,A,B={},C=4,D=b(),E=b(),F="GET";return i(),k(),{send:m,handle:l,run:t,failed:D}}(c.t,c.i,c.dj,c.aq,c.h)||a),c.ds=d.cOttvQ||(d.cOttvQ=function(a,b){function c(a,b){if(b||(b=q),b){var c;c="string"==typeof a?{errorInfo:a}:a,b===q&&(q=null),h(),b.reject(c)}}function d(a){q&&(a?c(a):i(!1))}function f(a,b){q&&g(a)}function g(a){var b=a.querySelector(".confirm-form");b?(n=b,o=b.querySelector(".confirm-form_yes"),p=b.querySelector(".confirm-form_no"),n.addEventListener("submit",k,!1),o.addEventListener("click",l,!1),p.addEventListener("click",m,!1)):c("parseConfirmFormError")}function h(){n&&(n.removeEventListener("submit",k,!1),o.removeEventListener("click",l,!1),p.removeEventListener("click",m,!1),n=null,o=null,p=null)}function i(a){h();var b=q;q=null,b.resolve(a)}function k(e){e.preventDefault(),i(!0)}function l(e){e.preventDefault(),i(!0),b.close()}function m(e){e.preventDefault(),i(!1)}var n,o,p,q=null;return{show:function(g){var h;return q?(h=a.start(),c("confirm is showed",h)):(q=h=a.start(),g=g||{},g.onShowed=f,g.onClosed=d,b.show(g)),h},hide:function(){}}}(c.i,c.ci)||a),c.dt=d.eW1aYQw||(d.eW1aYQw=function(){var a=0;return{dialog:{ajaxDialogDoesNotSupport:a++}}}()||a),c.du=d.agky4wQ||(d.agky4wQ=function(a,b,c,d,f,g,h,i){function k(a,b){var c=this,d=!!b;c.endpoint=a,c.ajaxTaskData=null,c.hasDialog=d,c.dialogLinkURL=d?b:null,c.processingTask=null}function l(a){var b=c.run(a.endpoint,a.ajaxTaskData);b.then(o,p,a)}function m(a,b){a?l(b):s(b)}function n(a,b){s(b)}function o(a,b){var c=b.processingTask;s(b),c.resolve(a)}function p(a,b){var c;"string"==typeof a&&(c={errorInfo:a}),q(b,"ajax",c||a)}function q(a,b,c){var d=a.processingTask;s(a),d.reject({from:b,processingError:c})}function s(a){a.processingTask=null,a.ajaxTaskData=null}return k.prototype.start=function(a,b){var c=this;if(!c.processingTask){var k,o=d.start();return c.processingTask=o,c.ajaxTaskData=a,c.hasDialog?g.isInited?(k=f.show({url:c.dialogLinkURL,fromElement:b}),k.then(m,n,c)):(o.resolve({error:{code:i.dialog.ajaxDialogDoesNotSupport}}),h.change(c.dialogLinkURL)):l(c),{processingTask:o,dialogTask:k}}return null},{create:function(a,b){return new k(a,b)}}}(c.e,c.dn,c.dr,c.i,c.ds,c.ci,c.bv,c.dt)||a),c.dv=d.azTiNuw||(d.azTiNuw=function(a,b,c,d,g,h,i,k,l,m){function n(a,b){var c=this,f=d[g(b)]||null;c.checkbox=a,c.isChecked=a.checked,c.isProcessing=!1,c.location=a.getAttribute("data-location"),f&&f.attach(c.onTriggered,c),c.isInteropIgnore=!1,c.triggeredEvent=f,c.ajaxDialogDoing=l.create(b,a.getAttribute("data-dialog-url")),c.handleEvent=o.bind(c),i.clickEvent.attach(c.handleEvent)}function o(e){var a=this;e.target===a.checkbox&&(e.preventDefault(),p(a,e))}function p(a,e){if(e.preventDefault(),!a.isProcessing){a.isProcessing=!0;var b,c=a.checkbox;b=e.target===c?c.checked:!c.checked;var d=a.ajaxDialogDoing.start({isActive:b,location:a.location},e.target);d.dialogTask?d.dialogTask.then(t,v,a):q(a,b),d.processingTask.then(w,x,a)}}function q(a,b){a.isChecked=b,a.isInteropIgnore=!0,a.triggeredEvent&&a.triggeredEvent.trigger(b),c(s,a.checkbox,b)}function s(a,b){a.checked=b}function t(a,b){a?q(b,!b.isChecked):b.isProcessing=!1}function v(a,b){b.isProcessing=!1,h.show()}function w(a,b){switch(b.isProcessing=!1,a.status){case"redirect":m.change(a.redirect);break;case"ok":break;default:a.error&&(q(b,!b.isChecked),h.show(a.error))}}function x(a,b){b.isProcessing=!1,q(b,!b.isChecked);var c;a.processingError?c=a.processingError.errorInfo:a.error&&(c=a.error),h.show(c)}function z(a){if(-1===B.indexOf(a)){var b=a.getAttribute("data-end-point-method");b&&(B.push(a),C.push(new n(a,b)))}}function A(a){var c=(a||f).querySelectorAll(".js-ajax-checkbox");b("ajax-check",c,z)}var B=[],C=[];return n.prototype={onTriggered:function(a){var b=this;b.isInteropIgnore?b.isInteropIgnore=!1:a!==b.isChecked&&(b.isChecked=a,b.checkbox.checked=a)}},a.initAjaxCheckbox=A,{init:A}}(c.e,c.bq,c.dn,c.dp,c.dq,c.br,c.bf,c.am,c.du,c.bv)||a),c.dw=d.u947nGw||(d.u947nGw=function(a,b,c,d,g,h){function i(a){c(q,k,null,a)}function k(a,b,c,d){g.switchClass(a,d,p)}function l(a){-1===q.indexOf(a)&&(0===q.length&&n.attach(i),q.push(a))}function m(a){h.ready(function(){d("invis",(a||f).querySelectorAll(o),l)})}var n=b.userSettingChangeVisibility,o=".js-user-invisible-watcher",p="__invisible",q=[];return a.initUserChangeVisibility=m,{init:m}}(c.e,c.dp,c.f,c.bq,c.m,c.am)||a),c.dx=d.fYdoUgA||(d.fYdoUgA=function(a,c,d,g,h,i,k,l){function m(a){return!a&&z||(z=f.getElementsByClassName(B))}function n(){v=v||f.getElementsByClassName("wrapper")[0],w=f.getElementById("boxPage"),x=f.getElementById("ep-stub")}function o(a,b,d,f){var g=f.height,h=c.calc().scrollTop,i=f.fullheightNodesWrapper.getBoundingClientRect().bottom+h,k=a.getBoundingClientRect().bottom+h,l=0;10>i-k&&(l=parseFloat(getComputedStyle(a).marginBottom)),a.style.minHeight=(a.offsetHeight+(g-i-(l||0))+.5)/A+"px"}function p(a,b){var c={height:a,fullheightNodesWrapper:b};s(z)?(A=z.length,d(z,o,null,c)):(A=1,o(z[z.length-1],null,null,c))}function q(e,a){var b=b?!i.hasClass(b,"dsn"):!1;if(!b&&v&&z.length){a=a&&a.height;var d=a?a:c.calc().height,g=v.offsetHeight;d>g?p(d,v):l.get("enabled")&&w&&g>w.offsetHeight?p(g,w):p(d,v)}i.removeClass(f.body,"js-full-height-process")}function s(a){return d(a,function(a){return"equal"!==a.getAttribute("data-fullHMode")?!1:void 0})}function t(){n(),d(m(),function(a){var b=a.style;parseInt(b.minHeight,10)&&(b.minHeight=0)}),q()}var v,w,x,z,A,B="js-full-height",C="full-height";return a.fullHeight=k.create({init:function(){q(),c.resize.attach(t),h.init.attach(function(){i.removeClass(f.body,C)}),h.updated.attach(function(a){a!==b&&i.switchClass(f.body,""!==a,C)}),h.cancelled.attach(function(){i.addClass(f.body,C)})},update:function(){n(),m(!0),q()}}),{set:q,update:t}}(c.e,c.aa,c.f,c.y,c.ah,c.m,c.v,c.bn)||a),c.dy=d.aE1kFNA||(d.aE1kFNA=function(b){function c(c,d,f){function g(f){return f=a.performance&&f?f:(new Date).getTime(),h=(f-l)/m,h>=1?(d(c,o),void b.cancel(k)):(d(c,n+Math.round(h*i)),void b.request(g))}var h,i,k,l=a.performance&&performance.now?performance.now():(new Date).getTime(),m=f.time||150,n=f.from||0,o=f.to,p=f.by;i=o-n,p&&(i=p,o=n+p),k=b.request(g)}return{run:function(b,d,f){return c.call(a,b,d,f)}}}(c.ag)||a),c.dz=d.tYybVAg||(d.tYybVAg=function(b,c,d,h,i,k,l,m,n){function o(e){var a=this,b=l.firstTouch(e);a.touchInitialPosX=a.actualTouchPosX=b.x,a.touchInitialPosY=a.actualTouchPosY=b.y}function p(e){var a,c,d=this,f=l.firstTouch(e),g=f.x,h=f.y,i=d.node,m=d.actualTouchPosX-g;if(clearTimeout(d.isActiveTimeoutID),d.moveEvents+=1,a=Math.abs(d.touchInitialPosX-g),c=Math.abs(d.touchInitialPosY-h),a>C&&.65>c/a){if(e.stopPropagation(),e.preventDefault(),d._active=!0,c>C&&(d._vectorY=1,b.addClass(i,"__vert")),d.actualTouchPosX=g,d.actualTouchPosY=h,d.isActiveTimeoutID=setTimeout(function(){x(e,d),d._active=!1},B),d.touchInitialPosX>g&&i.scrollLeft+i.offsetWidth>=i.scrollWidth||d.touchInitialPosX<g&&i.scrollLeft<=0)return d.onEdge=!0;d.onEdge=!1,0===d._vectorY&&k.request(function(){i.scrollLeft+=m})}}function q(e){var a,c=this,d=c.node,f=c.stepCoeficient,g=d.scrollLeft/c.slideWidth,h=+(g%1).toFixed(2),k=Math.floor(g);e.stopPropagation(),clearTimeout(c.isActiveTimeoutID),c.touchEndCoords=l.firstTouch(e),a=c.touchInitialPosX-c.touchEndCoords.x,b.removeClass(d,"__vert"),setTimeout(function(){c._active=!1},B),c._vectorY=0,c.moveEvents=0,c.onEdge||(0>a?f=1-f:d.scrollLeft+d.offsetWidth>=d.scrollWidth&&(f=0),h>f&&k++,i.run(d,t,{time:125,from:d.scrollLeft,to:c.slideWidth*k}),w(c,k))}function s(e){var a=this;clearTimeout(a.isActiveTimeoutID),a.onEdge||x(e,this)}function t(a,b){a.scrollLeft=b}function v(a){d.onShow.trigger(a.okBlockModel,d.bannerActionType.SHOWN)}function w(a,b){for(var c,d=Math.min(a.slidesInView+b,a.length)-1,f=b;d>=f;f++)c=a.node.children[f],c.okSlideIsShowed||(v(c),c.okSlideIsShowed=!0)}function x(e,a,b){if(a.moveEvents<=8){var c=a.node,d=c.scrollLeft,f=d/a.slideWidth,g=+(f%1).toFixed(2),h=Math.floor(f)+(g>a.stepCoeficient?1:0),k=a.touchInitialPosX||d,m=1;b&&(x.isThrottled||(x.isThrottled=!0,setTimeout(function(){x.isThrottled=!1},500))),(l.firstTouch(e).x||a.scrollInitialPos)>k&&(m=-1),i.run(c,t,{time:125,from:c.scrollLeft,to:a.slideWidth*(h+m)}),a.moveEvents=0,w(a,h)}}function z(a){var b=this,c=function(){};b.node=a.body,b.length=a.length||a.body.children.length,b.stepCoeficient=a.stepCoeficient||.25,b.showCoeficient=a.showCoeficient||.75,b.onShowCallback=a.onShowCallback||c,b.onClickCallback=a.onClickCallback||c,b.touchInitialPosX=0,b.touchInitialPosY=0,b.actualTouchPosX=0,b.actualTouchPosY=0,b.touchEndCoords=0,b.scrollInitialPos=!1,b.moveEvents=0,b._active=!1,b._vectorY=0,b.isScrolledTimeoutID=null,b.isActiveTimeoutID=null,b.recalcCallbackId=null,a.init&&b.init()}var A=z.prototype,B=300,C=30,D=480;A.init=function(){var c,d=this,f=d.node,i={moveHandler:p,touchHandler:o,touchendHandler:q,touchcancelHandler:s},k=a.screen.availWidth||g.clientWidth;k>D&&(d.stepCoeficient*=D/k*1.5);for(var l in i)!function(a){d[l]=function(e){a.call(d,e)}}(i[l]);n.winphoneVersion&&"7.5"==n.winphoneVersion?(b.addClass(f,"wp7"),f.addEventListener("scroll",function(e){d.scrollInitialPos||(d.scrollInitialPos=f.scrollLeft),clearTimeout(d.isScrolledTimeoutID),d.isScrolledTimeoutID=setTimeout(function(){x(e,d,!0),d.scrollInitialPos=!1},350)},!1)):a.navigator.msPointerEnabled?(m(f.querySelectorAll("A"),function(a){a.addEventListener("click",function(e){d._active&&(e.preventDefault(),e.stopPropagation())},!1)}),f.addEventListener("MSPointerDown",d.touchHandler,!1),f.addEventListener("MSPointerMove",d.moveHandler,!1),f.addEventListener("MSPointerUp",d.touchendHandler,!1)):(f.addEventListener("touchstart",d.touchHandler,!1),f.addEventListener("touchmove",d.moveHandler,!0),f.addEventListener("touchend",d.touchendHandler,!1),f.addEventListener("touchcancel",d.touchcancelHandler,!1)),c=h(function(){d.prepareData()},200),a.addEventListener("resize",function(){c(d)},!1),d.prepareData(),d.inited=!0,b.addClass(f,"__inited"),b.removeClass(f.parentNode,"__loading")},A.prepareData=function(){function a(a){for(var b=this,c=0,d=0,f=0,g=a.length;g>f;f++){var h=a[f];h&&(c=h.offsetHeight,c>d&&(d=c))}b.collection=a,b.length=a.length,b.maxHeight=d}var b,c,d,g,h=this,k=h.node,l=h.length||k.children.length;c=k.firstChild.offsetWidth,d=k.offsetWidth/c,g=Math.floor(d)+(d%1>h.showCoeficient?1:0),b=k.scrollLeft,b>0&&(clearTimeout(h.recalcCallbackId),h.recalcCallbackId=setTimeout(function(){i.run(k,t,{time:125,from:k.scrollLeft,to:h.slideWidth*Math.floor(b/c)})},350));for(var m=0;l>m;){var n=k.children[m];g>m?(n.okSlideIsShowed=!0,m++):(n.okSlideIsShowed=!1,m++)}a.prototype.equalizeHeight=function(){for(var a=this,b=a.length;b--;)a.collection[b].style.minHeight=a.maxHeight+"px"},new a(f.querySelectorAll(".slider.adv .adv-cnt_tx-w")).equalizeHeight(),new a(f.querySelectorAll(".slider.adv .adv_i.__sm")).equalizeHeight(),h.slideWidth=c,h.slidesInView=g},c.touchSlider=z,c.advSliderInitAll=function(){var a;if(c.advSlidersArr)for(var b=0,d=OK.advSlidersArr.length;d>b;b++)a=c.advSlidersArr[b],a.touchSlider||(a.touchSlider=new z({body:a,init:!0})),c.advSlidersArr.splice(b,1)}}(c.m,c.e,c.w,c.y,c.dy,c.ag,c.bt,c.f,c.ab)||a),c.ea=d.sG692CQ||(d.sG692CQ=function(a,b,c,d){function f(b){if(b){var f=a.request(b).then(function(a){var b=a.responseText;b&&0!==b.length&&c(b)}).send();d.sended(f)}}return b.open.attach(function(a){f(a.sidebar.getAttribute("data-state"))}),{send:f}}(c.be,c.ai,c.co,c.al)||a),c.eb=d.fdrDUew||(d.fdrDUew=function(a,b,c,d,g){a.initFastTap=g.create({init:function(){function a(e){o=e.changedTouches[0].pageX,p=e.changedTouches[0].pageY,q=!0,n=e.timeStamp}function g(e){if(q){var a=e.changedTouches[0].pageX,y=e.changedTouches[0].pageY;Math.sqrt(Math.pow(a-o,2)+Math.pow(y-p,2))>12&&(q=!1)}}function h(a){switch(a.nodeName){case"TEXTAREA":case"SELECT":case"LABEL":return!0;case"INPUT":switch(a.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!a.disabled&&!a.readOnly;default:return b.hasClass(a,"fasttouchfocus")}}function i(a){var b;if((b=c.parentBySelector(a,"a"))&&b.href&&d.see(b.href).appHook)return!0;switch(a.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(a.value)return!0;if(a.disabled)return!0;break;case"input":if("text"===a.type&&a.value)return!0;if("file"===a.type||a.disabled)return!0;break;case"label":return!a.htmlFor;case"iframe":case"video":return!0}return c.parentBySelector(a,".nofasttouch")}function k(a){function b(e){return 0===d?void(d=1):(a.removeEventListener("click",b),void(Date.now()-c<300&&(e.stopPropagation(),e.preventDefault())))}var c=Date.now(),d=0;a.addEventListener("click",b)}function l(e){if(q){q=!1;var a=e.timeStamp-n;if(a>=0&&300>=a){var b=e.target;i(b)||(e.preventDefault(),e.stopPropagation(),h(b)&&b.focus(),k(b),b.click())}}}function m(e){q=!1}var n,o,p,q=!1;f.addEventListener("touchstart",a),f.addEventListener("touchmove",g),f.addEventListener("touchend",l),f.addEventListener("touchcancel",m)}})}(c.e,c.m,c.p,c.bd,c.v)||a),c.ec=d.ao3SZgQ||(d.ao3SZgQ=function(b,c,d,g,h){function i(a,b){var c=f.createElement("iframe"),d=c.style;return c.src=a,d.border="none",d.width="1px",d.height="1px",b&&(c.onload=b),f.body.appendChild(c),c}var k="giftApp",l=".js-launch-native-app";b.launchApp=function(b){var c;switch(b.platform){case"IOS":try{i(b.schemaURL),setTimeout(function(){a.location.replace(b.storeData)},100),c=200}catch(a){}break;case"Android":a.location.replace("intent://"+(b.host?b.host:"m.ok.ru")+"/#Intent;scheme="+b.schemaURL+";package="+b.storeData+";end;"),c=200;break;default:localStorage.getItem(k)?(localStorage.removeItem(k),history.back()):(localStorage.setItem(k,""),i(b.schemaURL),setTimeout(function(){a.location.replace(b.storeData)},1500)),c=2e3}b.isNotNeedBack||setTimeout(function(){history.back()},c)},b.initAppLauncher=h.create({init:function(a){d.clickEvent.attach(function(e){var c,d=g.parentBySelector(e.target,a||l);d&&(c=d.getAttribute("data-launch-app"),c&&b.launchApp(JSON.parse(c)))})}})}(c.e,c.f,c.bf,c.p,c.v)||a),c.ed=d.tjvWMA||(d.tjvWMA=function(b,c,d,f,g){function h(a,c,d){g.request(function(){setTimeout(function(){if(c instanceof Function&&(d=c,c=null),c)for(var f in c)c.hasOwnProperty(f)&&b.switchClass(a,c[f],f);d instanceof Function&&d(a)},k)})}var i=500,k=25;return{start:h,startRemoval:function(a,c,d){c&&h(a,c),setTimeout(function(){b.remove(a)},d||i)},setStyle:function(a,b){a.style[d.transition]=b||""},pause:function(b,c){b.style[c]=a.getComputedStyle(b).getPropertyValue(c)},css:{shown:{__shown:!0},hidden:{__hidden:!0,__shown:!1}},onEnd:function(a,b){f(a,c,b)}}}(c.m,c.ae,c.an,c.k,c.ag)||a),c.ee=d.pjLo1bQ||(d.pjLo1bQ=function(a,b){function c(a){var b=this;b.config=a,b.onTaskComplete=function(){setTimeout(function(){(!b.task||b.task.done)&&b.hide()},4)}}return c.prototype={show:function(){var b=this.domNode;b&&a.start(b,a.css.shown)},hide:function(){var b=this,c=b.domNode;c&&(a.startRemoval(c,{__obsolete:!0},1e3),b.domNode=null,b.task=null)},start:function(a){if(!a.done){var c=this;c.domNode=c.config.getDomNode(),c.show(),c.task=c.task?b.all(c.task,a):a,c.task.then(c.onTaskComplete,c.onTaskComplete)}}},{create:function(a){return new c(a)}}}(c.ed,c.i,c.m)||a),c.ef=d.psf6SqA||(d.psf6SqA=function(a,b){function c(){g=d.cloneNode(!0),a.addClass(g,"__unlocked")}var d,g,h,i=b.create({getDomNode:function(){return d||(d=f.getElementById("toolbarProgress"),d&&(h=d.parentNode,c(),h.replaceChild(g,d))),g&&!g.parentNode&&(c(),h.appendChild(g)),g}});return{start:i.start.bind(i)}}(c.m,c.ee)||a),c.eg=d.hgXk2IQ||(d.hgXk2IQ=function(a){function b(){this.count=0,this.stack={},this.data={}}var c=10;return b.prototype={deleteUnused:function(){for(var b=this.data,c=this.stack,d={},f=c.first;f;)d[f.url]=!0,f=f.next;a(b,function(a,c){d[c]||delete b[c]})},push:function(a,b){var d=this,f=d.stack,g={url:a};d.count==c&&(d.count--,f.first=f.first.next,d.deleteUnused()),f.last?(f.last.next=g,f.last=g):f.first=f.last=g,d.count++,d.data[a]=b},replace:function(a,b){var c=this,d=c.stack,f=d.last,g=c.data,h=g[a];f&&(f.url=b),"undefined"!=typeof h&&(g[b]=h,delete g[a])},get:function(a){return this.data[a]}},{create:function(){return new b}}}(c.g)||a),c.eh=d.s3A13yw||(d.s3A13yw=function(a,b,c,d,g,h){var i,k;return{fixScrollRecord:function(){k=h.recordScroll()},createScroll:function(a){return{action:"special",specialTarget:"scroll",options:a}},processing:{js:{run:function(e){var a=e.context;if(a.postponeJs)return void(a.postponedJs=e);var b=d.createDomTree(e.content);g.runAll(b),i=b},invert:function(b,c){if(i)c.content=i.innerHTML;else{var d=f.getElementById("beforeBodyClose");if(d){var g=Array.prototype,h=d&&d.parentNode.childNodes,k=d&&g.indexOf.call(h,d);if(-1!=k){var l=g.slice.call(h,k+1),m=f.createElement("div");a(l,function(a){"SCRIPT"!=a.tagName||a.src||m.appendChild(a.cloneNode(!0))}),c.content=m.innerHTML}}}}},css:{run:function(e){var a=b.addCss(d.createDomTree(e.content));return c.start(a),{task:a}}},scroll:{run:function(e){h.resetScroll(e.scroll)},invert:function(a,b){b.scroll=k||h.recordScroll(),k=null}}}}}(c.f,c.j,c.ef,c.cl,c.ce,c.aa)||a),c.ei=d.pPyFFDw||(d.pPyFFDw=function(b,c,d,g,h,i,k,l,m,n,o,p,q,s,t,v,w,x){function z(){return a.location.pathname+a.location.search}function A(a,b){k.navigating({state:a,fromCache:T===b})}function B(a){k.rendering({state:a}),v.removeAll()}function C(a,b){k.navigated({state:a,domLoadedTime:b})}function D(a){var b=a.indexOf("#");return b>0?a.substr(0,b):a}function E(a,b){aa=!0;var c={};i.processAjaxEnvelopes(da,a.redo,c),b&&W.push(b,{redo:c.undo})}function F(){S&&(n.recoverState(S),S=null)}function G(a){$=a}function H(a){return Z[a]||a}function I(){function b(b){if(_)return void(_=!1);S=b.stateToRecover;var c=H(S?b.locationKey:z());if(c===$)return void F();var f=$;G(c);var g=W.get(c);g?(A(b,T),B(b),E(g,f)):(ba=!0,d.go(a.location.href,R))}G(z()),V.appendPipeline(b),n.stateAccounting.attach(function(e){var a=e.state;V.isActive(a)||(a.locationKey=$)}),n.stateAccounted.attach(function(e){if(!V.isActive(e.state)){var a=z();$!==a&&(W.replace($,a),l(Z,function(b,c){b===$&&(Z[c]=a)}),Z[$]=a),G(a)}}),n.statePopping.attach(function(e){var a=e.state;if(!V.isActive(a)){var b=a.locationKey;if(b){var c={stateToRecover:a,locationKey:b};V.stamp(c),e.state=c}}})}function J(){return!0}function K(a){var b=O.exec(a);return b&&b.length>0}var L,M,N,O,P,R,S,T=1,U=2,V=o.create("nav",{isDefault:!0}),W=s.create(),X={cancelled:!0,allowDefault:!0},Y={cancelled:!0,allowDefault:!1},Z={},$="",_=!1,aa=!1,ba=!1,ca=t.processing,da={computeUndo:!0,onDomParsed:function(a){var b=a.envelopes;b.splice(0,0,t.createScroll(da)),aa=!1},onComplete:function(b){if(b.failed)return void a.location.replace(p.insertParams(b.url,{_ajaxnav:"failed"}));if(!aa){W.push(H(z()),{redo:b.undo});var c=b.state,d=f.title;_=!0,f.title=b.oldTitle,V[b.samePage?"swap":"go"](c),f.title=d,G(z());var g=a.location.hash;g&&setTimeout(function(){var a=f.getElementsByName(g.substring(1));a&&a[0]&&a[0].scrollIntoView()},1)}var h=Date.now()-b.timestamp,i=b.postponedJs;i&&(b.postponeJs=!1,ca.js.run(i)),C(c,h),F()},special:ca},ea={prepare:function(e){var b=ba||m.hasClass(e.target,"js-nav-same-page"),c=!b&&m.hasClass(e.target,"js-nav-refresh-page"),d=e.uri;if(ba=!1,e.triggerClickEvent(),c||N.disabled||!b&&(!N.isForwardFine||!P(d))||e.isDefaultPrevented()||-1!==d.indexOf("#")&&D(a.location.href)===D(d))return X;if(M){if(!M.done&&M.url===d)return Y;M.abort(),M=null,S=null}n.prepareForFutureStateChange();var g={url:d};A(g,U);var h={samePage:b,url:d,state:g,oldTitle:f.title,timestamp:Date.now(),postponeJs:!0};return h},tuneRequest:function(a){M=a.ajaxTask,M.header("X-Nav-Kind",a.samePage?"SAME":"FORWARD"),M.header("X-Build",L),M.anyway(function(){M=null}),q.start(M)},avoidToken:!0,prepareProcessing:function(a){B(a.state)},fail:function(a){a.ajaxTask.redirected||w.show()},processing:da,isDefault:!0};b.ajaxNavigation=c.create({init:function(a){V.init(),!a.disabled&&a.isForwardFine&&I(),R=h.onLinkToAjaxEnvelope(ea),L=a.build},update:function(a){N=a;var b=a.forwardFilter;b?(P=K,O=new RegExp(b,"gi")):P=J,L!==a.build&&x.reload(!0)}})}(c.e,c.v,c.bu,c.bf,c.cq,c.co,c.am,c.g,c.m,c.ca,c.ch,c.h,c.ef,c.eg,c.eh,c.bc,c.br,c.bv)||a),c.ej=d.tbZJ5FA||(d.tbZJ5FA=function(a,b,c,d,g,h){var i="__bottom",k="__top",l=5;a.initProfileMenu=h.create({init:function(){function a(){return n||(n=f.getElementById("head")),n?n.offsetHeight:0}function c(a){return a.parentNode.querySelector(".list.__inner")}function h(b,c){if(c){var f=d.getTotalOffsetTop(b.parentNode),h=b.offsetHeight,m=g.calc().scrollTop,n=a(),o=f-(h+l);o>0&&f-m-n>h&&(d.addClass(b,k),d.removeClass(b,i))}else d.removeClass(b,k),d.addClass(b,i)}var m,n;b.clickEvent.attach(function(e){if(m&&!m.checked&&e.target!==m&&!d.hasClass(e.target,"tgl-lnk_off")){m.checked=!0;var a=c(m);a&&h(a,!1)}}),f.addEventListener("change",function(e){var a=e.target;if(d.hasClass(a,"tgl-profile-menu")){m=a;var b=c(a);b&&h(b,!a.checked)}},!1)}})}(c.e,c.bf,c.p,c.m,c.aa,c.v)||a),c.ek=d.ai0a7tg||(d.ai0a7tg=function(a,b,c,d,g,h,i,k,l,m,n,o){function p(a,b){var c=this;c.node=a,c.isProcessed=!1,c.ajaxDialogDoing=l.create(b,a.getAttribute("data-dialog-url")),c.handleEvent=q.bind(c),i.clickEvent.attach(c.handleEvent);var d=a.getElementsByTagName("a");0!==d.length&&-1!==d[0].href.indexOf("#js-dlg")&&(d[0].href=0,d[0].removeAttribute("href"))}function q(e){var a=this,b=a.node;if(d.isChildOf(e.target,b)&&(e.preventDefault(),!a.isProcessed)){a.isProcessed=!0;var c=a.ajaxDialogDoing.start({groupId:parseInt(b.getAttribute("data-group-id"),10),location:b.getAttribute("data-location")},b);c.processingTask.done||(c.dialogTask?c.dialogTask.then(s,t,a):x(a)),c.processingTask.then(v,w,a)}}function s(a,b){a?x(b):b.isProcessed=!1}function t(a,b){b.isProcessed=!1,a&&a.errorInfo&&"parseConfirmFormError"===a.errorInfo||h.show()}function v(a,b){if(b.isProcessed=!1,a.error)z(b),a.error.code!==o.dialog.ajaxDialogDoesNotSupport&&h.show(a.error);else{"problem"===a.status&&h.show(a.problem.description),i.clickEvent.detach(b.handleEvent);var c=b.node.querySelector("a");c.removeAttribute("href")}}function w(a,b){b.isProcessed=!1,z(b);var c;a.processingError?c=a.processingError.errorInfo:a.error&&(c=a.error),h.show(c)}function x(a){var b=a.node.querySelector("."+C);b&&(m.removeClass(b,D),m.addClass(b,E))}function z(a){var b=a.node.querySelector("."+C);b&&(m.removeClass(b,E),m.addClass(b,D))}function A(a){var b=a.getAttribute("data-end-point-method");return b?new p(a,b):null}function B(){var a=f.querySelectorAll(".js-ajax-join-to-group");b("ajax-join-to-group",a,A)}var C="js-join-group",D="ic-pls",E="ic-chk_g",F=!1;a.ajaxJoinToGroupInit=function(){F||(F=!0,k.envelope.applied.attach(B),n.updated.attach(B),B())}}(c.e,c.bq,c.dn,c.p,c.dq,c.br,c.bf,c.am,c.du,c.m,c.ah,c.dt)||a),c.el=d.as7MQQ||(d.as7MQQ=function(a,b,c,d,g,h,i,k,l,m){function n(a,b){var c=this;c.node=a,c.isProcessed=!1,c.ajaxDialogDoing=i.create(b,null),c.handleEvent=o.bind(c),g.clickEvent.attach(c.handleEvent)}function o(e){var a=this,b=a.node;if(c.isChildOf(e.target,b)&&(e.preventDefault(),!a.isProcessed)){a.isProcessed=!0;var d=f.getElementById("field_hst"),g=d?d.checked:!1,h=a.ajaxDialogDoing.start({chatId:parseInt(b.getAttribute("data-chat-id"),10),inviteeId:parseInt(b.getAttribute("data-invitee-id"),10),originatorId:parseInt(b.getAttribute("data-originator-id"),10),showHistory:g},b);v(a),h.processingTask.then(s,t,a)}}function p(a){b("x3",f.querySelectorAll('div[data-chat-id="null"]'),function(b){b.setAttribute("data-chat-id",a)})}function q(a){b("x4",f.querySelectorAll('div[data-originator-id="null"]'),function(b){b.setAttribute("data-originator-id",a)})}function s(a,b){if(b.isProcessed=!1,(a.error||a.problem)&&(w(b),d.show(a.error||a.problem.description)),a.chatId&&(D=!0,p(a.chatId)),a.searchLink)for(var c=f.querySelectorAll("#boxPage form.search, #live-search form.search"),g=0;g<c.length;g++){var h=c[g];h.setAttribute("data-endpoint",a.searchLink)}if(a.backButtonLink){var i=f.getElementById("js-invite-back");i.href=a.backButtonLink}if(a.backButtonLabel){var l=f.querySelector("#js-invite-back .ic_tx");l.innerHTML=a.backButtonLabel}if(a.inviteeId)for(var m=f.querySelectorAll('.js-ajax-join-to-chat[data-invitee-id="'+a.inviteeId+'"]'),g=0;g<m.length;g++){var n=m[g],o=n.parentNode;o.removeChild(n);var s=o.querySelector(".js-invite-tick");k.removeClass(s,"dsn")}a.originatorId&&q(a.originatorId)}function t(a,b){b.isProcessed=!1,w(b);var c;a.processingError?c=a.processingError.errorInfo:a.error&&(c=a.error),d.show(c)}function v(a){var b=a.node.querySelector(A);b&&(k.removeClass(b,B),k.addClass(b,C))}function w(a){var b=a.node.querySelector(A);b&&(k.removeClass(b,C),k.addClass(b,B))}function x(a){var b=a.getAttribute("data-end-point-method");return b?new n(a,b):null}function z(){var a=f.querySelectorAll(".js-ajax-join-to-chat");b("ajax-join-to-chat",a,x)}var A=".js-ajax-join-to-chat-indicator",B="ic-pls",C="ic-chk_g",D=!1;
m.messageLoaded.attach(function(){if(D){var a=f.querySelector("div[data-chat-id]:first-child");a&&(a.hasAttribute("data-chat-id")&&p(a.getAttribute("data-chat-id")),a.hasAttribute("data-originator-id")&&q(a.getAttribute("data-originator-id")))}}),h.navigated.attach(function(){D=!1});var E=!1;return a.ajaxJoinToChatInit=function(){E||(E=!0,h.envelope.applied.attach(z),l.updated.attach(z),z())},{init:z,initOne:x}}(c.e,c.bq,c.p,c.br,c.bf,c.am,c.du,c.m,c.ah,c.ay)||a),c.em=d.tof4pwQ||(d.tof4pwQ=function(a,b,c,d,f){function g(){var a=n&&l>=k?o:p;a!==q&&(q.deactivate(),q=a,a.activate())}function h(a){l=a.width,g()}function i(a){n=a.isTwoColumnsLayout===!0,b.set("showToolbarMenuConfigure",a.showToolbarMenu===!0),n?m.attach(h):m.detach(h),g()}var k=810,l=c.calc().width,m=c.resize,n=!1,o={activate:function(){b.set("enabled",!0)},deactivate:function(){b.set("enabled",!1)}},p={activate:function(){},deactivate:function(){}},q=p;a.setColumnsLayout=f.create({update:i})}(c.e,c.bn,c.aa,c.m,c.v)||a),c.en=d.lK2Wdw||(d.lK2Wdw=function(){return{toolbar:{height:40}}}()||a),c.eo=d.snzFL1Q||(d.snzFL1Q=function(a,b,c,d,g,h){function i(a){c.isInit&&h.request(k,a)}function k(a){b.set("showToolbarMenuEnable",a.scrollTop-m>c.sidebar.getOffsetHeight())}var l,m=d.toolbar.height,n="__show-main-menu";b.onChanged("showToolbarMenuEnable",function(a){g.switchClass(l,a,n)}),b.synced("showToolbarMenuConfigure",function(c){l||(l=f.getElementsByClassName("toolbar")[0]),c?(a.changed.attach(i),i(a.calc())):(a.changed.detach(i),b.set("showToolbarMenuEnable",!1))})}(c.aa,c.bn,c.as,c.en,c.m,c.ag)||a),c.ep=d.taDfKw||(d.taDfKw=function(){function a(){var a={ns:d},c=b.createElement("div");c.className="vpopup";var f=b.createElement("div");f.className="mvplayer_cont mv_ajax",f.id="mvplayer_cont";var g=b.createElement("div");a.playerContainer=g,f.appendChild(g);var h=b.createElement("div");h.className="vdospinner",f.appendChild(h),c.appendChild(f);var i=b.createElement("div");a.loaderContainer=i,i.className="mvdynamic";var k=b.createElement("div");return k.className="vdospinner",i.appendChild(k),c.appendChild(i),c.okView="videoPopup",a.domRoot=c,a}var b=f,c={},d="video";return c.createVideoPopup=a,c}()||a),c.eq=d.lHPEkw||(d.lHPEkw=function(a,b,c,d,g,h,i,k,l,m){function n(){v&&(d.remove(w),v=null,w=null,t=null)}function o(a){var b=q(),c=w.style;c.top=Math.round(b.y)+"px",c.left=Math.round(b.x)+"px",c.width=b.width+"px";var d=f.querySelector(".mv_viewport");if(d&&v){var g=w.firstChild;s(d,g),g.okResize&&g.okResize();var h=v.playerContainer.nextSibling;h&&s(d,h)}else!d&&a&&n()}function p(a){v=b.createVideoPopup(),w=v.domRoot,o(),x.appendChild(w),g.embed(v.playerContainer,a),t=a,k.navigating.attachOnce(function(e){e.state.video=a})}function q(){var a=f.getElementById("mvplayer_cont")||f.getElementById("content"),b=0,c=0,g=0;return a?(b=d.getTotalOffsetTop(a),c=d.getTotalOffsetLeft(a),g=a.offsetWidth):g=f.body.clientWidth,{x:c,y:b,width:g}}function s(a,b){b.style.height=a.offsetHeight+"px"}var t,v,w,x=f.body;c.register(function(e){if(d.hasClass(e.target,"js-vlayer")){var a=e.target.getAttribute("data-video"),b=a&&JSON.parse(a);b&&(z(),n(),p(b),h.content.hide())}});var z=i.create({init:function(){k.navigated.attach(function(e){var a=e.state&&e.state.video&&e.state.video;t&&(a&&a.videoSrc===t.videoSrc?w&&o(!0):n())}),k.rendering.attach(function(e){t&&h.content.show()}),l.changed.attach(function(){w&&o()})},update:function(){m.fixScrollRecord(),l.resetScroll()}});a.videoLayer=i.create({update:function(){v&&d.remove(v.loaderContainer)}})}(c.e,c.ep,c.bu,c.m,c.bi,c.ar,c.v,c.am,c.aa,c.eh)||a),c.er=d.cSm7dsg||(d.cSm7dsg=function(b){return{get:function(c){var d=a.getComputedStyle?a.getComputedStyle(c):c.currentStyle,f=["webkit","Moz","O","ms","Khtml"];return"boxSizing"in d?d.boxSizing:b(f,function(a){var b=a+"BoxSizing";return b in d?d[b]:void 0})}}}(c.f)||a),c.es=d.eihO5zA||(d.eihO5zA=function(b,c,d,g,h){function i(a){function b(){var b=a.scrollHeight,c=a.clientHeight;if(b>c){var d=Math.min(a.getAttribute("data-max-height")||b,b);a.style.minHeight=d+h+"px"}}var c=g.get(a),f=c===k,h=f?a.offsetHeight-a.clientHeight:0;a.okOriginalSize=a.offsetHeight,d.changed.attach(b),a.addEventListener(l,b,!1),setTimeout(function(){b()},4)}var k="border-box",l="oninput"in a?"input":"keyup";return b.expandTextAreas=function(a){h.ready(function(){c("exp-ta",f.querySelectorAll(a),i)})},b.expandTextArea=i,{expand:i}}(c.e,c.bq,c.aa,c.er,c.am)||a),c.et=d.cnQuDyw||(d.cnQuDyw=function(a,b,c,d,g,h){function i(a,b){if(null!=a){k(b,a.parentNode,a);var c=a.parentNode.getAttribute("hierarchy-parent");i(f.getElementById(c),b)}}function k(d,f,g){f.hasOnChangeListener||f.addEventListener("change",function(){if(g.checked)a.collapseCheckboxArray(f.parentNode,g);else{var h=d.querySelectorAll("[hierarchy-parent="+g.id+"]");b(h,function(a){c.removeClass(a,"dsn")}),1==h.length&&(h.item(0).firstChild.checked=!0)}f.hasOnChangeListener=!0},!1)}function l(a,d){b(a.querySelectorAll("[hierarchy-parent="+d.id+"]"),function(b){var d=b.firstChild;c.addClass(b,"dsn"),d.checked=!1,m(a,d,b)})}function m(a,c,d){var f=a.querySelectorAll("[hierarchy-parent="+c.id+"]");f.length>0&&(b(f,function(){l(a,c)}),k(a,d,c))}a.collapseCheckboxes=function(a){h.ready(function(){g("cca",f.querySelectorAll(a),function(a){var b=a.querySelector('input[type="checkbox"]:checked');if(null!=b){l(a,b),k(a,b.parentNode,b);var d=f.getElementById(b.parentNode.getAttribute("hierarchy-parent"));i(d,a)}else{var g=a.querySelector('[hierarchy-parent=""]'),h=g.querySelector("input[type=checkbox]");m(a,h,g),h.checked=!0}c.removeClass(a,"dsn")})})},a.collapseCheckboxArray=l}(c.e,c.f,c.m,c.p,c.bq,c.am)||a),c.eu=d.adCtrfA||(d.adCtrfA=function(c,d,g,h,i,k,l,m,n,o,p,q){function s(){return a.pageCtx||{}}function t(a){if(a){var b=a.okOriginalSize;return null!=b&&(a.style.height=b+"px"),p.expand(a)}}function v(a){var b;b="string"==typeof a?f.querySelector(a):a,b&&b.scrollIntoView()}function w(e){function a(a){c.Toast&&c.Toast.hide(),w=null!=a.getResponseHeader("X-Error-Message"),c.processAjaxEnvelope(this.response(),{onEnvelope:function(a,b,d,g){b===c.OP_APPEND&&setTimeout(function(){var a=f.querySelector("#messages-pager-bottom, #comments-pager-bottom .pager"),b=c.messaging;g&&h.addClass(g,D),x&&!b&&v(A),a?v(a):b&&b.config&&!b.config().pushSendHintEnabled&&b.scrollDown()},1)},onComplete:function(){var a=f.querySelector([A," ",C].join("")),d=a?a.form.elements:[],i=d.field_edit,k=i?i.value:b,l=d.field_rpl?d.field_rpl.value:b,m=c.messaging;if(t(a),m&&(c.collapseBubbles&&c.collapseBubbles(!0),g.fastPostingSucceed()),"on"===k){var n=d.field_msgInx;n||(n=d.field_cmntIdKey);var o=f.getElementById("ta-emul");o?c.editMessageWithSmiles(o):a.parentNode.className="uform_i";var p=F.querySelector(".reply"),q={handled:!1,editFlagElement:i,domReply:p,msgIndexElem:n};g.messageEdited(q),q.handled||(h.remove(p),i.value="off",h.remove(n));var s=d.field_ofc;s&&(s.disabled=!1)}else if(m&&l){var v=F.querySelector(".reply");v&&!v.querySelector(".ic-err")&&h.clear(v),d.field_rpl.value="off",d.field_cmntIdKey.value=""}a.value="";var w=f.getElementById("ta-emul");w&&h.clear(w)}})}function n(a){var b=a&&a.getResponseHeader("X-Error-Message");b&&b.length&&F.setAttribute("data-submitted",""),l(f.querySelectorAll(A),function(a){h.removeClass(a,E)}),z=!1,d.finished(F)}var o,p,q,w,x=s().focusOnSubmit,F=e.form;if(z||F.okAvoidAjax)return!1;c.messaging&&g.fastPostingInitiated(),z=!0,F=i.parentBySelector(F,"form"),o=F.action,p=F.method||B,q=k.data(F),h.addClass(F,E);var G=m.request(o,p,q),H=i.parentBySelector(F,".dlist");return H&&!h.hasClass(H,"cmplb")&&G.header("X-Redirect-Required","1"),c.messaging&&f.querySelector("#comments-pager-bottom .ldmb")&&G.header("X-Has-More-Read","1"),G.then(a).anyway(n).withToken().send(),!0}function x(a){q.register(function(e){return e.form&&i.parentBySelector(e.form,a)?w(e):void 0}),l(f.querySelectorAll(a),function(a){var b=a.querySelector('input[type="submit"]');b&&(b.disabled=!1)})}var z=!1,A=".post-message",B="POST",C="textarea",D="highlight",E="ld";c.initAjaxPost=function(){function b(){var a=c.messaging;(!a||a.config().onlySimpleBubblesEnabled)&&v(A);var b=f.querySelector(".uform textarea.xpnd");t(b)}function d(b){var c=a.getSelection(),d=b.lastChild;if(c.rangeCount>0&&d){var f=c.getRangeAt(0);f.setStartAfter(d),c.removeAllRanges(),c.addRange(f.cloneRange())}}function h(a,b){return null!=a.querySelector(b)}s().ajaxPost&&x("#cmntMsg, #umsg");var i,k,l,m,n;s().ajaxReply&&o.onLinkToAjaxEnvelope({selector:".rpl",prepare:function(e){l=c.messaging,i=f.querySelector(".uform textarea"),k=i&&i.value,l&&(m=l.config(),n=g.find.textarea(!0),n&&m.fastSubmitEnabled&&n.focus())},processing:{onComplete:function(){i&&(i.value=k),b()}}}),s().ajaxEdit&&o.onLinkToAjaxEnvelope({selector:".edt",prepare:function(e){var a=e.target;l=c.messaging,l&&(m=l.config(),n=g.find.textarea(!0)),n&&h(a,".a-menu")&&n.focus()},processing:{onComplete:function(){b(),n&&(c.processFormControls(n),l&&(m.isWinPhone||d(n),n.focus()))}}})}}(c.e,c.am,c.ay,c.m,c.p,c.cp,c.f,c.be,c.cc,c.cq,c.es,c.bu)||a),c.ev=d.fPF1wQ||(d.fPF1wQ=function(a,b,c,d,g,h,i,k,l,m){function n(a){var b=a.tagName;return("INPUT"==b||"BUTTON"==b)&&"submit"==a.type}function o(a){var b,c,d=a.elements||[],f=d.length,g=0;for(c=0;f>c;c++)if(b=d[c],n(b)&&++g>1)return!0;return!1}var p=!1,q="form.js-submit,.js-submit form";a.enableAjaxFormSubmit=l.create({init:function(h){var l,m="ld",p="js-collapsed",s="js-collapsed-heights",t=a.transitionEndEvent,v=t&&h.animationEnabled;v&&(f.addEventListener(t,function(e){var a=e.target;c.hasClass(a,p)&&c.remove(a)}),l=function(a,b,d){if(d){var g,h=f.createElement("div"),i=h.style,k=d.parentNode;h.className="js-holder",k&&k.insertBefore(h,d),h.appendChild(d),g=h.offsetHeight;var l,m=d.getAttribute("data-hide-style"),n=d.getAttribute("data-ajax-content-id");if(n&&(l=f.getElementById(n)),"heights-merge"===m&&l){var o,q,t=l.offsetHeight;g>t?(o=g,q=t):(o=t,q=g),i.opacity=1,i.height=o+"px",h._addedAjaxContent=l,setTimeout(function(){c.addClass(h,s),i.height=q+"px",setTimeout(function(){c.remove(h),c.removeClass(h._addedAjaxContent,"__hided"),h._addedAjaxContent=null},650)},0)}else i.height=g+"px",setTimeout(function(){c.addClass(h,p)},0);return!1}return!0}),i.clickEvent.attach(function(e){var a=e.target;n(a)&&(a.form.okSubmitSender=a)}),f.body.addEventListener("submit",function(e){function h(a){var b=a.getAttribute("data-tm"),c=parseInt(b,10)||0;c>E&&(E=c)}function i(){a.processAjaxEnvelope(this.response(),{onBeforeRemove:l,onEnvelope:function(a,b,f,g){if(g){var h=g.querySelectorAll(".event_li,.event");d(h,function(a){c.addClass(a,"js-appear"),setTimeout(function(){c.addClass(a,"js-fadein")},0)})}}})}function n(){this.redirected&&this.response()&&i.call(this)}function p(){v&&setTimeout(function(){c.removeClass(v,m)},300),g.finished(s[0])}var s=e.target;if(b.matches(s,q)){var t=s.getAttribute("data-entity");if(t&&f.querySelectorAll('*[data-entity="'+t+'"]').length>1)return!0;var v,w=s.okSubmitSender,x={};if(w){if(!c.hasClass(w,"js-axb")&&o(s))return!0;x[w.name]=w.value;var z=b.next(w);if(!z||!c.hasClass(z,"ldn")){var A=f.createElement("span");A.className="ldn",w.parentNode.insertBefore(A,z)}v=w.form,c.addClass(v,m)}c.preventDefault(e);var B=s.action,C=s.method||"POST",D=[],E=0,F=b.parentBySelector(s,"*[data-id-prefix]"),G=F&&F.getAttribute("data-id-prefix"),H=G?G.length:0;d(f.querySelectorAll(".event"),function(a){var b=a.id,c=null!=b&&b.length>0?b.substr(H):b;D.push(c)}),d(f.querySelectorAll(".event_li"),h),d(f.querySelectorAll(".notify"),h);var I=function(a,b){a in x||(x[a]=[]),x[a].push(b)};d(s.querySelectorAll("textarea,input"),function(a){var b=a.name,c=a.type,d=a.checked;"submit"!=c&&("radio"==c||"checkbox"==c?d&&I(b,a.value):I(b,a.value))}),E>0?x["ds.lstTime"]=E:x["ds.eventsIds"]=D,k.request(B,C,x).then(i,n).anyway(p).withToken().send()}},!1)},update:function(){}}),a.processPopUpTextArea=function(a){var b=f.querySelector(".nl_dlg-btn.__main"),d=a.value.replace(/^\s+|\s+$/g,"").length;c.switchClass(b,!d,"dis")},a.ajaxifyPopupSubmit=function(e){function f(){a.processAjaxEnvelope(this.response(),{onComplete:function(){m.close()},onBeforeRemove:function(a,b,c){h.contentRemoved({index:a,content:b,container:c})}})}function i(){c.removeClass(n,"ld"),p=!1,g.finished(n[0])}var l,n=e.target,o={};!p&&n&&(p=!0,b.matches(n,"form")||(n=b.parentBySelector(n,"form")),l=n.action,d(n.querySelectorAll("input,textarea"),function(a){var b;b="checkbox"==a.type?a.checked?"on":"off":a.value,o[a.name]=b}),c.addClass(n,"ld"),k.request(l,"post",o).then(f).anyway(i).withToken().send(),c.preventDefault(e))}}(c.e,c.p,c.m,c.f,c.am,c.ay,c.bf,c.be,c.v,c.ci)||a),c.ew=d.ioJPhPQ||(d.ioJPhPQ=function(a,b,c,d,g){var h;a.ie?(h=function(){var a,b=f.querySelectorAll('textarea, input[type="text"]');a=function(a){a.value===a.placeholder&&(a.value="")},c(b,function(b){a(b),d(b,"click",function(b){a(b.target)})})},b.navigated.attach(h)):h=function(){},g.fixIEInputPlaceholder=h}(c.ab,c.am,c.f,c.k,c.e)||a),c.ex=d.a6igMvw||(d.a6igMvw=function(a,b){a.disableAttach=function(a){var c,d=f.getElementById("att-act");d&&(c=(a.value||"").replace(/^\s+/,"").replace(/\s+$/,""),c.length?(b.addClass(d,"dis"),d.onclick=function(a){return a.preventDefault(),!1}):(b.removeClass(d,"dis"),d.onclick=null))};var c="data-post-url",d="st.ofc";a.updateUploadButtonLink=function(){var a=f.getElementById("att-act"),b=f.getElementById("field_ofc");if(b&&a){var g=b.checked?"on":"off",h=a.getAttribute(c);-1==h.search(d)?h+="&"+d+"="+g:h=h.replace(new RegExp(d+"=[a-zA-Z]*"),d+"="+g),a.setAttribute(c,h)}}}(c.e,c.m,c.es,c.et,c.eu,c.ev,c.ew)||a),c.ey=d.m0N524g||(d.m0N524g=function(a){return{getAlreadyAttachedCount:a(),getAllowedAttachCount:a(),processLimitViolation:a(),disableUploadSource:a(),uploadFinished:a(),prepareUploadItemContainer:a(),handleUploadError:a(),processUploadedItem:a(),cancelPhotoUpload:a()}}(c.t)||a),c.ez=d.mTZ20g||(d.mTZ20g=function(a,c){function d(a){var b=f.querySelector(".js-sm-upload-file-input").files;i=b.length;var d={count:0};c.getAlreadyAttachedCount(d);var h=d.count,k={count:0};c.getAllowedAttachCount(k);var l=k.count;h+i>=l&&(h+i>l&&(c.processLimitViolation(),i=l-h),c.disableUploadSource()),i>0&&g(b,0,i,a)}function g(d,f,i,m){h=a.request(m[f],"POST").attachFile(d[f]).then(function(){k(),i-1>f?g(d,++f,i,m):c.uploadFinished()},l).setExternal();var n={uploadPreviewWrapper:b};c.prepareUploadItemContainer(n);var o=n.uploadPreviewWrapper;o.firstChild.style.backgroundImage="url("+URL.createObjectURL(d[f])+")",h.xhr.upload.addEventListener("progress",function(e){var a=Math.ceil(e.loaded/e.total*100)+"%",b=o.querySelector(".progress");b&&(b.style.width=a)},!1),h=h.send()}var h,i=0,k=function(){c.processUploadedItem({uploadedImageUrl:h.response()}),h=null},l=function(){c.handleUploadError(),h=null};return c.cancelPhotoUpload.attach(function(e){h&&(h.abort(),h=null,e.originalClickEvent.preventDefault())}),{processMultipleUpload:function(a){d(a)}}}(c.be,c.ey)||a),c.fa=d.ukAetYA||(d.ukAetYA=function(b,c,d,g,h,i,k,l,m,n,o,p){function q(a){return a.form||c.parentBySelector(a,"form")}function s(a){var b=q(a);return b&&b.querySelector(".js-sm-upload-file-input")}function t(a){var b=s(a),c=b&&b.value;return c&&c.length>0}function v(e,a){b.preventDefault(e),e.stopPropagation&&e.stopPropagation();var c=s(a);c.focus(),c.click()}function w(a){var b=f.querySelector(".js-dyn-edit");if(A(b,q(a))){var c=f.querySelector(".js-dyn-edit-form");if(c){var d=f.createElement("input");d.type="hidden",d.value=b.value,d.name=b.name,c.appendChild(d)}}}function x(e,a){t(a)||v(e,a)}function z(e,a){var c=q(a);c&&b.toggleClass(c,"js-toggled-"+a.getAttribute("data-toggle-key")),b.preventDefault(e)}function A(a,c){return a&&(a.getAttribute("data-post-alw")||a.value!=a.getAttribute("data-orig"))||b.hasClass(c,"post-message")}function B(a){a.okOriginalClassName=a.className}function C(a){a&&(a.className=a.okOriginalClassName,a.okOriginalClassName=null)}function D(c){var d=f.getElementById("sm-s-header");if(d&&b.hasClass(d,"__compact")){var h=f.querySelectorAll("#sm-s-avatar, .mtopic-form-w .ustt, .mtopic-form-w .ustt ~ .cc");if(!a.matchMedia||!a.matchMedia("(min-width: 45em) and (orientation: landscape)").matches){var i=f.getElementById("sm-s-avatar");i&&b.switchClass(i,c,"dsn")}g(h,function(a){b.switchClass(a,c,"dsn")});var k=f.querySelectorAll("#sm-s-info");g(k,function(a){b.switchClass(a,c,"ml5")})}}function E(a){var d=c.parentBySelector(a,".focus-listener");if(d&&!b.hasClass(d,J)){B(d),B(q(a)),b.addClass(d,J);var f=a.getAttribute("data-focus-rows");f&&(a.rows=parseInt(f),b.hasClass(a,"xpnd")||(b.addClass(a,"xpnd"),OK.expandTextArea&&OK.expandTextArea(a))),D(!0)}}m.ready(function(){h("upload",f.getElementsByClassName("js-upload-form"),function(a){l.delegate(a,"change",".js-upload-file-input",function(e){b.addClass(e.target.form,"js-val-selected")})})});var F="js-dyn-edit-submit",G="js-sm-submit-btn",H="js-toggle-btn",I=[".",F,", .",G,", .",H].join("");d.clickEvent.attach(function(e){var a=c.parentBySelector(e.target,I);a&&(b.hasClass(a,F)&&w(a),b.hasClass(a,G)&&x(e,a),b.hasClass(a,H)&&z(e,a))}),l.delegate(f,"change",".js-sm-upload-file-input",function(e){function a(){b.hasClass(l,"post-message")&&(l.okAvoidAjax=!0),(!l.okHandleSubmit||l.okHandleSubmit())&&l.submit()}function d(c){var d=c&&c.upload_url;if(n.multipleUploadEnabled)b.addClass(f.body,"js-multi-uploading"),o.processMultipleUpload(d);else{var g="string"==typeof d?d:d[0];g&&(l.action=g,l.enctype="multipart/form-data"),a()}}function h(){setTimeout(a,0),logClientEvent("ajax.topic.update.fail")}var k=e.target;if(t(k)){var l=k.form;b.addClass(l,"ld"),b.addClass(f.body,"js-sm-upldng");var m=f.querySelector(".js-dyn-edit");if(A(m,l)){m.disabled=!0;var n={};if(g(f.querySelectorAll(".js-ajax-input"),function(a){n[a.name]=a.checked?"checked":a.value}),b.hasClass(l,"post-message")){var p=c.parentBySelector(m,".dlist");p&&b.addClass(p,"cmplb");var q=f.getElementById("field_msg");q&&(q.disabled=!0);var v=f.querySelector(".js-sm-prgrs");v.scrollIntoView();var w=f.getElementById("ta-emul");w&&!f.getElementById("msg_attach_lst")&&(w.contenteditable=!1)}var x=s(k);n.photoCount=x.files.length,n.multipleUploadEnabled=x.multiple,i.request(m.getAttribute("data-post-url"),"POST",n).then(d,h).withToken().send()}else setTimeout(a,0)}});var J="focus-on";m.ready(function(){h("upload-focus",f.querySelectorAll(".focus-listener"),function(a){l.delegate(a,"focus",".focus-ctrl",function(){E(this)},!0),l.delegate(a,"click",".focus-clear",function(){if(b.hasClass(a,J)){C(a),C(q(this));var c=a.okOriginalClassName;c&&(a.className=c);var d=f.querySelector(".focus-ctrl");d.value="",d.style.height="",d.rows=1,D(!1)}})})}),n.domLoaded.then(function(){m.ready(function(){h("upload-file",f.querySelectorAll(".js-upload-file-input"),function(a){var c=a.value;if(c&&c.length>0){var d=f.querySelector(".js-upload-form");d&&b.addClass(d,"js-val-selected")}}),h("upload-orig-data",f.querySelectorAll(".js-dyn-edit"),function(a){a.setAttribute("data-orig",a.value)})}),g(f.querySelectorAll(".focus-ctrl"),function(a){a.value&&E(a)})})}(c.m,c.p,c.bf,c.f,c.bq,c.dj,c.h,c.cc,c.am,c.l,c.ez,c.be)||a),c.fb=d.bwu8Ig||(d.bwu8Ig=function(){function b(b,k){var l=this;l.isTouchsEventsAdded=!1,l.startY=0,l.prevOffset=0,l.intervalToken=0,l.el=b,l.onScrollCallback=k,l.intervalRunner=c.bind(l),l.onTouchStart=d.bind(l),l.onTouchEnd=f.bind(l),l.windowPageShow=g.bind(l),l.windowPageHide=h.bind(l),l.isScrollEventAdded=!0,b.addEventListener(i,k,!1),a.addEventListener(m,l.windowPageShow),a.addEventListener(n,l.windowPageHide)}function c(){var a=this,b=a.el,c="undefined"!=typeof b.pageYOffset?b.pageYOffset:b.scrollTop;c===a.prevOffset?(0!==a.intervalToken&&(clearInterval(a.intervalToken),a.intervalToken=0),"function"==typeof a.onScrollCallback&&a.onScrollCallback(b)):a.prevOffset=c}function d(e){var a=this,b=e.touches,c=b[0];a.startY=c.pageY}function f(e){var a=this,b=e.changedTouches,c=b[0];a.prevOffset=c.pageY,a.prevOffset!==a.startY&&(0!==a.intervalToken&&clearInterval(a.intervalToken),a.intervalToken=setInterval(a.intervalRunner,p))}function g(e){var a=this;e.persisted&&(a.el.addEventListener(i,a.onScrollCallback,!1),a.isScrollEventAdded=!0,o&&(a.el.addEventListener(k,a.onTouchStart,!1),a.el.addEventListener(l,a.onTouchEnd,!1)),a.isTouchsEventsAdded=!0)}function h(){var a=this;a.el.removeEventListener(i,a.onScrollCallback,!1),a.isScrollEventAdded=!1}var i="scroll",k="touchstart",l="touchend",m="pageshow",n="pagehide",o=/OS 5_[\d_]* like Mac OS X/.test(a.navigator.appVersion),p=50;return b.prototype.destructor=function(){var b=this;a.removeEventListener(m,b.windowPageShow),a.removeEventListener(n,b.windowPageHide);var c=b.el;b.el=null,c&&(b.isScrollEventAdded&&c.removeEventListener(i,b.onScrollCallback,!1),b.isTouchsEventsAdded&&o&&(c.removeEventListener(k,b.onTouchStart,!1),c.removeEventListener(l,b.onTouchEnd,!1))),0!==b.intervalToken&&clearInterval(b.intervalToken)},{create:function(a,c){return new b(a,c)}}}()||a),c.fc=d.fGTY1CQ||(d.fGTY1CQ=function(b,c,d,g,h){function i(a){return"function"==typeof a}function k(a,b){this.init(a,b)}function l(a){var b=this;return a===!0?b._onScroll():-1===b.checkTimeoutId&&(b.checkTimeoutId=setTimeout(b.onCheckEdgeTimeout,q)),b}function m(){var a=this;a.checkTimeoutId=-1,a._onScroll()}var n="at-edge",o="data",p=250,q=500,s="horizontal",t=k.prototype;return t.init=function(c,d){var f,h=this,k=this._findScrollableAncestor(c),n=function(){var a;return function(){a&&clearTimeout(a),a=setTimeout(function(){h._onScroll(),a=null},p)}}(),q=!1,t=function(){this._currentScrollPos=function(){return h._options.direction==s?q?function(){return-h._scroll.x}:function(){return h._scroll.scrollLeft||0}:function(){return h._scroll.pageYOffset||h._scroll.scrollTop||0}}(),this._lastScrollPos=this._currentScrollPos(),this._currentViewportSize=function(){return h._options.direction==s?q?function(){return h._scroll.wrapper.clientWidth}:function(){return h._scroll.clientWidth}:function(){return h._scroll.innerHeight||h._scroll.clientHeight}}(),this._currentElementOuterSize=function(){return h._options.direction==s?function(){return h._el.offsetWidth}:function(){return h._el.offsetHeight||0}}(),q||(this.bfCacheScroller=b.create(k,n)),this.on(o,"_onData",this),this._updateDimensions();var a=function(){setTimeout(function(){h._updateDimensions()},25)};g.changed.attach(a),h.disposeCurrentInstance=function(){g.changed.detach(a)},i(f)&&f(this)}.bind(this);if(h._options=d||{},f=h._options.onInit,h._el=c,h._listeners={},h.checkTimeoutId=-1,h.onCheckEdgeTimeout=m.bind(h),h.checkEdge=l.bind(h),h._options.direction==s){var v=c.parentNode,w=a.getComputedStyle?a.getComputedStyle(v,null):c.currentStyle,x=h._options.nativeScrollingFixEnabled||"undefined"!=typeof w["-webkit-overflow-scrolling"];x&&h._options.useNativeScroll||(q=!0,a.OK.loader.use("iscroll-js",function(){var a,b,d,f,g;this._scroll=new iScroll(c.parentNode,{hScroll:!0,vScroll:!1,useTransition:!0,onScrollEnd:n,onBeforeScrollStart:function(e){if(e.touches){var c=e.touches[0];a=c.pageX,b=c.pageY,g=!0}else e.preventDefault(),g=!1},onBeforeScrollMove:function(e){if(g){var c=e.touches[0];d=Math.abs(c.pageX-a),f=Math.abs(c.pageY-b),d>=f&&e.preventDefault()}}}),t()}.bind(this)))}q||(this._scroll=k,t())},t.on=function(a,b,c){var d=this;d._listeners[a]=function(a){"string"==typeof b&&(b=c[b]);var f=[a.type,d],g=a.args;if(g&&g.length){var h,k=g.length;for(h=0;k>h;h++)f.push(g[h])}i(b)&&b.apply(d,f)}},t.off=function(a){this._listeners[a]=function(){}},t.fire=function(a){var b=Array.prototype.slice.call(arguments).slice(1),c=this._listeners;a in c&&c[a].apply(this,[{type:a,args:b}])},t.getScrollPosition=function(){return this._currentScrollPos()},t.getViewportSize=function(){return this._viewportSize},t._findScrollableAncestor=function(b){for(var g=b.parentNode,h=b.ownerDocument;g&&g!=a&&g!=f&&(d.hasClass(g,"wrapper")||!c(g));)g=g.parentNode;return null==g||g==h||g==h.body?a:g},t._updateDimensions=function(){var a=this._el;this._options.direction==s?this._offset=d.getTotalOffsetLeft(a):this._offset=d.getTotalOffsetTop(a),this._outerSize=this._currentElementOuterSize(),this._viewportSize=this._currentViewportSize(),this.fire("update-dimensions",a),this._scroll.refresh&&this._scroll.refresh()},t._insertFragment=function(b,c,d){function f(){"function"==typeof d&&d(),h._updateDimensions()}function g(){if(h._updateDimensions(),!(Math.abs(m-h._outerSize)<5)){m=h._outerSize;var a=m-l;n.scrollBy?n.scrollBy(0,a):n.scrollTop+=a}}for(var h=this,i=h._el,k=a.document.createDocumentFragment();b.firstChild;)k.appendChild(b.firstChild);if(c)i.appendChild(k),setTimeout(f,17);else{var l=h._currentElementOuterSize(),m=0,n=h._scroll;i.insertBefore(k,i.firstChild),f(),setTimeout(g,0)}},function(){var b=function(a,b){var c=a.getElementsByTagName("img"),d=c.length,f=0;if(d>0)for(var g=0;d>g;g++){var h=c[g];h.complete||(f++,h.onload=h.onerror=function(){f--,0==f&&b()})}f||b()};t.addData=function(c,d,f){var g=a.document.createElement("div");if("string"==typeof c)g.innerHTML=c;else if("object"==typeof c&&c.length){var h,i=c.length;for(h=0;i>h;h++)g.appendChild(c[h])}else g.appendChild(c);this._options.direction===s?b(g,function(){this._insertFragment(g,d,f)}.bind(this)):this._insertFragment(g,d,f)}}(),t._onData=function(a,b,c,d){this.addData(c,d)},function(){var a=function(a,b,c){a+b+this._viewportSize>=c&&a>=this._lastScrollPos&&(a>0||a===this._lastScrollPos)&&this.fire(n,!0)},b=function(a,b){b>=a&&a<=this._lastScrollPos&&this.fire(n,!1)};t._onScroll=function(){var c=this._outerSize,d=this._offset,f=this._currentScrollPos(),g=this._options,h=i(g.bottomThreshold)?g.bottomThreshold(f,this._viewportSize,d,c):d+c,k=i(g.topThreshold)?g.topThreshold(f,this._viewportSize,d,c):0;b.call(this,f,k),a.call(this,f,d,h),this._lastScrollPos=f,this.fire("scroll",f,this._viewportSize,this._outerSize)}}(),t.destructor=function(){var a=this;a.bfCacheScroller&&a.bfCacheScroller.destructor(),a.disposeCurrentInstance&&a.disposeCurrentInstance()},{create:function(a,b){return new k(a,b)}}}(c.fb,c.dc,c.m,c.aa,c.ag)||a),c.fd=d.mTVlbdg||(d.mTVlbdg=function(a,b){return b()}(c.e,c.t)||a),c.fe=d.dH4H79w||(d.dH4H79w=function(){var a="okData";return function(b){return b[a]||(b[a]={})}}()||a),c.ff=d.fqhCXag||(d.fqhCXag=function(){function a(a){var c=this;c._tailFetchesLeft=a.autoFetchCount!==b?a.autoFetchCount:3,c._headFetchesLeft=a.headFetchCount!==b?a.headFetchCount:3,c._initialRepeatedFetches=a.repeatedFetchCount!==b?a.repeatedFetchCount:0,c._repeatedFetchesLeft=c._initialRepeatedFetches,c._repeatedFetching=!1}var b,c=a.prototype;return c.reset=function(a){var b=this;a?b._repeatedFetching?b._repeatedFetchesLeft=b._initialRepeatedFetches:b._tailFetchesLeft=0:b._headFetchesLeft=0},c.setRepeatedFetching=function(a){this._repeatedFetching=a},c.hasRepeatedFetching=function(){return this._repeatedFetching},c.decrement=function(a){var b=this;b._repeatedFetching?b._repeatedFetchesLeft--:a?b._tailFetchesLeft--:b._headFetchesLeft--},c.hasMore=function(a){var b=this,c=b._repeatedFetching?b._repeatedFetchesLeft:a?b._tailFetchesLeft:b._headFetchesLeft;return c>0},{FetchCount:a,create:function(b){return new a(b)}}}()||a),c.fg=d.hw7fUpQ||(d.hw7fUpQ=function(){var b=!1,c=!1;return function(){if(c)return b;b=!1;var d=a.navigator.appVersion;if(/OS 5_[\d_]* like Mac OS X/.test(d))b=!0;else{var f=/Android ([\d\.]+)/.exec(d);if(f&&f.length>1){var g=parseFloat(f[1]);b=!isNaN(g)&&g>=2.2}}return c=!0,b}}()||a),c.fh=d.fUXBSQg||(d.fUXBSQg=function(a,b){function c(a){var c=this;c.node=a,c.nodeStyle=a.style,c.isShowed=!1,b.syncChanged(d,c)}function d(a){var b=this,c=a.scrollTop;c<=a.height/2?b.hideOffScreen():b.setTop()}return c.prototype={setTop:function(){var c=this.nodeStyle;c.display="block",a()||(c.top=b.calc().scrollTop+"px")},hideOffScreen:function(){this.nodeStyle.display="none"},checkScroll:function(){d.call(this,b.calc())}},{create:function(a){return new c(a)}}}(c.fg,c.aa)||a),c.fi=d.mxSmWg||(d.mxSmWg=function(b,c,d){function f(){a.scrollTo(0,0)}return{create:function(a){var g=c.create(a);d.addClass(a,b()?"posfixed":"posabs"),g.checkScroll(),a.addEventListener("click",f)}}}(c.fg,c.fh,c.m)||a),c.fj=d.cSnzvg||(d.cSnzvg=function(){var b;return function(){if(!b){var c,d=f.createElement("div"),g=a.getComputedStyle(d,null),h=["webkit","Moz","O","ms"],i=h.length;for(c=0;i>c;c++){var k=h[c]+"ColumnWidth";if(k in g){b=k;break}}b||(b="columnWidth")}return b}}()||a),c.fk=d.aFxGJvg||(d.aFxGJvg=function(b,c,d,g,h,i,k,l,m,n,o,p,q,s,t,v,w,x,z,A){function B(a){var b=A.getState();b.url=a,A.accountStateUpdate()}function C(p){function t(b){if(n.hasClass(b,"grid")){var c=b.children,d=c.length;if(d>0){var f=i(b).colData;if(!f){var g=a.getComputedStyle(b,null),h=parseInt(g[oa],10),k=parseInt(b.getAttribute("data-rows")||1,10);isNaN(h)||isNaN(k)||(f={width:h,rowCount:k},i(b).colData=f)}f&&(b.style.width=f.width*Math.ceil(d/f.rowCount)+"px")}}}function v(a,b){z.envelope.applied({container:b,operation:a}),("append"===a||"prepend"===a)&&d.messageLoaded()}function x(a,b,c,o,q,s,t){function x(){i(c)[H]=null,o(O,q,a,s)}function z(){B||x()}function A(a,b){i(a)[C]=b,b?a.setAttribute(D,b):a.removeAttribute(D)}if(ha||a){var B=!1,C=a?G:F,D=a?I:J,E=i(c)[C];if(E&&o(M,q,a,s)!==!1){var R=i(c)[H];if(!R){var S=h.request(E);d.loadingInitiated({listId:c.id,task:S}),i(c)[H]=S.xhr,ka&&S.xhr.setRequestHeader("X-Update-Feed-Counter","1"),S.then(function(){c.offsetParent&&k(l.createDomTree(this.response()).childNodes,function(d){var h,i,l=d.getAttribute("action"),z=d.getAttribute(K),C=d.getAttribute(L),D=d.childNodes;z||C?(h=f.getElementById(z)||(C?f.querySelector(C):null),i=null!==h):i=!1;var F=d.querySelectorAll("script");switch(setTimeout(function(){k(F,w.run)},0),l){case"append":case"prepend":var G=d.getAttribute("append"===l?I:J),H=null!==G&&G.length>0;if(o(N,q,a,s,D,H),0!==D.length){B=!0,i&&A(h,G),k(D,function(a){a.setAttribute("data-page-url",E)});var M=Array.prototype.slice.call(D);b.addData(M,a,function(){g({element:d,atBottom:a}),v(l,h),x(),"horizontal"==t&&p.showScrollHint&&!na&&(!i||c.offsetWidth>h.innerWidth)&&setTimeout(function(){na||(na=!0,i&&n.addClass(h,"scroll-hint"))},100)})}else i&&A(h,null);break;case"content":i&&(n.clear(h),h.appendChild(m(d)),v(l,h));break;case"remove":i&&n.remove(h);break;case"attribute":i&&h.setAttribute(d.getAttribute("name"),d.getAttribute("value"))}})},function(){o(P,q,a,s)}).anyway(z),S.withToken().send()}}}}function A(h){function l(a,c,d,f,g,h){switch(a){case M:if(!f&&ma)return!1;n.addClass(c,R),n.addClass(c,d?T:S);break;case N:var i=d?$:Z,k=d?X:W;w.decrement(d),ma||w.hasMore(d)||(n.removeClass(c,k),n.addClass(c,i)),h&&g&&g.length?(d||b.messaging)&&f&&(w.setRepeatedFetching(!0),w.reset(!0),w.hasMore(d)&&(n.removeClass(c,$),n.addClass(c,X),ma=!1)):(n.removeClass(c,i),n.removeClass(c,k),n.addClass(c,d?ba:aa));break;case P:w.reset(!0),w.reset(!1),ma=!0,n.addClass(c,Y),n.addClass(c,Z),n.addClass(c,$),n.removeClass(c,"js-dlb");break;case O:setTimeout(function(){n.removeClass(c,R),n.removeClass(c,S),n.removeClass(c,T)},100)}}var m=h.querySelectorAll(".grid,.l:not([fixed]):not(.no-paging)"),q=s.matches(h,ca),v=s.matches(h,".or-hor")?"horizontal":"vertical",w=o.create(p),z=Array.prototype;z.push.apply(p.lists,z.slice.call(m)),"horizontal"==v&&k(m,t),n.removeClass(h,V),n.addClass(h,U),0===m.length||q||"true"===h.getAttribute("data-disabled")?(n.addClass(h,aa),n.addClass(h,ba),n.removeClass(h,X),n.removeClass(h,W)):k(m,function(b){function m(b){if(f.elementFromPoint&&q){var c,d,g=f.elementFromPoint(q,la?150:0);if(g&&!s.matches(g,".it")&&(g=s.parentBySelector(g,".it")),g){if(d=g.getAttribute("data-page-url")){var h=null;if(ga){if(k(C,function(a){return h=g.getAttribute(a),h?h:void 0}),!h){var i=g.querySelector("a[name]");i&&(h=i.getAttribute("name"))}h&&(c=d.indexOf("#"),c>-1&&(d=d.substring(0,c)),d+="#_s-"+h,A=!0)}if((!A||h)&&B(d),la)try{a.external.notify("replace-url:"+d)}catch(a){}}}else{var l=b.getScrollPosition(),m=b.getViewportSize();
if(m>l&&(d=a.location.href,c=d.indexOf("#"),c>-1)){var n=d.substring(c);"#lst"!=n&&(d=d.substring(0,c),B(d))}}}}function o(c){g.attach(c.checkEdge),i(b)[G]=b.getAttribute(I),i(b)[F]=b.getAttribute(J),k(b.children,function(b){b.setAttribute("data-page-url",a.location.href)}),c.on("at-edge",function(a,f,g){!w.hasMore(g)||n.hasClass(b,"js-manual-loading-only")||ja||(g||c.getScrollPosition()>=0&&c.getScrollPosition()<=450||_)&&!pa&&d.deferredPull(ia,function(){_=!1,x(g,c,b,l,h,!1,v)})}),b.beforeUnbind=function(){c.off("at-edge")},"horizontal"===v?c.on("update-dimensions",function(a,b,c){t(c)}):"vertical"===v&&c.on("update-dimensions",function(a,b,c){q=Math.round(n.getTotalOffsetLeft(c),+c.offsetWidth/2)});var o="data-avpos";if(fa&&!b.hasAttribute(o)){b.setAttribute(o,"1");var z=0;if(ga){var A=a.location.hash;A&&A.length>0&&0==A.indexOf("#_s-")&&(A=A.substring(4),function(){function a(){var b=la?z>1:z>0;if(b)return void E.detach(a);var c=f.getElementById(A);c||(c=f.getElementsByName(A)[0]),c&&(s.matches(c,".it")||(c=s.parentBySelector(c,".it")),c&&c.scrollIntoView())}a(),E.attach(a)}())}c.on("scroll",function(){var a,b=function(){m(c),a=null};return function(){z++,a&&clearTimeout(a),a=setTimeout(b,200)}}())}D=function(a){var d=a.target;return s.matches(d,da)&&s.isChildOf(d,h)?(x(s.matches(d,ea)||null!==s.parentBySelector(d,ea),c,b,l,h,!0,v),p.ignoreFirstLoad=ja=!1,!0):void 0},setTimeout(function(){c.checkEdge(!0)},0)}var q,z,A=!1,C=["name","id"];z=c.create(b,{direction:v,useNativeScroll:p.useNativeScroll,nativeScrollingFixEnabled:p.nativeScrollingFixEnabled,bottomThreshold:function(){return"horizontal"==v?function(a,b,c,d){return c+d-b}:function(a,b,c,d){return c+d-2*b}}(),topThreshold:function(a,b,c,d){return c+b},onInit:o}),b.okFetchScroll=z}),n.removeClass(h,"init"),w.hasMore(!0)||(n.removeClass(h,X),n.addClass(h,$)),w.hasMore(!1)||(n.removeClass(h,W),n.addClass(h,Z))}p=p||{};var C=p.dom,_=p.pageLoad,fa=p.preservePosition,ga=p.locationHashPosition,ha=p.prependToHead,ia=p.initialTimeoutValue,ja=p.ignoreFirstLoad,ka=p.dynamicCounters,la=p.hasExternalNotify,ma=!1,na=!1,oa=q(),pa=!1;p.lists=[],C.length&&k(C,A)}var D,E=t(),F="prevPageURL",G="nextPageURL",H="loading",I="next-url",J="prev-url",K="target-id",L="target-qs",M="before-load",N="load-succeeded",O="after-load",P="load-error",R="ld",S=R+"t",T=R+"b",U="js-y",V="js-n",W="js-at",X="js-ab",Y="mnl",Z=Y+"t",$=Y+"b",_="cmpl",aa=_+"t",ba=_+"b",ca=".loaded",da=".ldm",ea=da+"b";v.register(function(a){return D&&D(a)}),b.enableAjaxScrolling=C,b.initAjaxBlock=x.create({init:function(a){if(a.moveTopButton){var b=f.querySelector(".movetop");b&&p.create(b)}},dispose:function(a){var b=a.lists;k(b,function(a){var b=a.okFetchScroll;b&&(g.detach(b.checkEdge),b.destructor())}),D=null},lateUpdate:function(a){a.dom=f.querySelectorAll(".dlist"),C(a)}})}(c.e,c.fc,c.ay,c.fd,c.be,c.fe,c.f,c.cl,c.cn,c.m,c.ff,c.fi,c.fj,c.p,c.t,c.bu,c.ce,c.v,c.am,c.ca)||a),c.fl=d.shb1hcA||(d.shb1hcA=function(b,c,d){function g(){for(var a=0,b=F.length;b>a;a++)F[a].hide();F=[]}function h(){g(),v().show()}function i(){g(),v().hide()}function k(a){return[q,a,D,"jsessionid=",p].join("")}function l(a,b,c){m(k(a),b,c)}function m(b,g,k){function l(b){q||(d.remove(w),q=!0,b?a[p]=function(){}:delete a[p],null!=s&&clearTimeout(s))}function m(a){l(null==a),h()}function o(a){l();try{i()}catch(a){}n(b,a,g)}var p="okJsCallback_"+ ++B,q=!1,s=setTimeout(m,C),v=t(g);v.show(),F.push(v),a[p]=o,k=k||{},k.client="mob",k.jsonp=p,b+=c.formatParams(k,"?");var w=f.createElement("script");w.addEventListener("error",m,!1),w.type="text/javascript",w.async=!0,w.src=b,A.appendChild(w)}function n(a,b,c){if("object"==typeof b&&null!=b&&(-1==a.indexOf(s)||"function"==typeof(c.q=o)))if(null!=b.error){var d=sessionStorage||{},f=parseInt(d.wmfLastReloginDate,10)||0;if("error.notloggedin"==b.error&&f<(new Date).getTime()-E){d.wmfLastReloginDate=(new Date).getTime().toString();var g=z();g?location.href=g:location.reload(!0),logClientEvent("music",["sessionTimeout"])}else h()}else c(b)}function o(a){for(var b=new P(R),c=b[J](a)[1]+K,d=w(c),f=0,g=0,h=d.length;h>g;g++)f+=L(U+d[g]);for(var i,k,l=H(),m=[],j=0,n=d.length;n>j;j++)k=L(U+d[j]),i=j+1==n?k:L(U+d[j+1]),m[O](M(f-i*k*l[j]));var o=a+S+m[N](V)+T+I();return o}var p,q,s,t,v,w,x,z,A=f.body,B=0,C=3e4,D=";",E=5e3,F=[],G="play",H=function(){return x.c2},I=function(){return x.c1},J="exec",K="secret",L=a.parseInt,M=a.Math.abs,N="join",O="push",P=a.RegExp,R="md5=(\\w*)",S="&clientHash=",T="&client=",U="0x",V="";return b.wmf=function(a){p=a.jsid,q=a.url,s=G+";"},{call:l,plugIn:function(a){t=a.getProgress,v=a.getErrorView,w=a.MTc4NTk3,x=a.music,z=a.getIntent},MTc4NTk3:G}}(c.e,c.h,c.m)||a),c.fm=d.fNuWlJw||(d.fNuWlJw=function(){function b(){return f||(d=a.FileReader||a.FileReaderSync,f=!0),d}function c(){if(!h){var a=new XMLHttpRequest;g=b()&&"upload"in a,h=!0}return g}var d=!1,f=!1,g=!1,h=!1;return{read:b,upload:c}}()||a),c.fn=d.fAx330A||(d.fAx330A=function(a,b,c,d,g,h,i){var k="upload_file_input";a.fileUpload=c.create({init:function(){function c(a,b){this.dom=b,this.model=a}a.vuploadReplaceState=function(a){var b=d.getState();b.url=a,d.accountStateUpdate()},c.prototype={selectFile:{tap:function(e){function a(e){g.change(d)}if(!i.upload())return void h.allowDefault(e);var c=f.getElementById(k);c&&c.parentNode&&c.parentNode.removeChild(c);var d=this.dom.href;return c=f.createElement("input"),c.setAttribute("class","hidden-file-input"),c.setAttribute("type","file"),c.setAttribute("id",k),c.addEventListener("change",a,!1),f.body.appendChild(c),this.model&&this.model.accept?c.setAttribute("accept",this.model.accept):c.removeAttribute("accept"),c.style.top=Math.floor(b.getTotalOffsetTop(e.target))+"px",c.focus(),c.click(),!1}}},h.register("fileUpload",c)},update:function(){a.updateVideoUploadState&&a.updateVideoUploadState()}})}(c.e,c.m,c.v,c.ca,c.bv,c.r,c.fm)||a),c.fo=d.p4xQQ||(d.p4xQQ=function(a,b,c,d,g){function h(){n&&(n.abort(),n=null)}function i(a){g.change(a)}function k(a,b){var c=n.response();i(c?c:b),n=null}function l(a,b){i(b),n=null}function m(){var a=f.getElementById("upload_file_input");if(a&&a.files){var d=f.getElementById("photo_upload_form");if(d){var g=d.getAttribute("data-js-upload-url");if(g){var h=d.getAttribute("data-js-error-url");b.addClass(d,"ld"),b.addClass(f.body,"js-sm-upldng");var i=a.files[0];n=c.request(g,"POST").attachFile(i).then(k,l,h).setExternal().send(),a.parentNode&&a.parentNode.removeChild(a)}}}}var n;a.photoUpload=d.create({init:function(){},update:function(){h(),m()}})}(c.e,c.m,c.be,c.v,c.bv)||a),c.fp=d.o75K9kg||(d.o75K9kg=function(b,c,d){function f(a,b){this.form=b}f.prototype={goAway:{tap:function(e){if(-1===a.location.href.indexOf("jsessionid"))return void b.allowDefault(e);var f=e.target,g=this.form;g.okSubmitBtn=f;var h=d.data(g),i=c.request(g.action,"post",h);i.xhr.okNoReferrer=!0,i.send()}}},b.register("form-outlink",f)}(c.r,c.be,c.cp)||a),c.fq=d.i1KNqkQ||(d.i1KNqkQ=function(a){function b(a,b){this.element=b,this.inputFile=b.getElementsByClassName("input-file_upload-element")[0],this.label=b.getElementsByClassName("input-file_filename-label")[0],this.inputFile.addEventListener("change",this)}b.prototype={updateFilename:function(){this.inputFile.files&&this.inputFile.files[0]&&(this.label.textContent=this.inputFile.files[0].name)},selectFile:{tap:function(a){this.inputFile.click()}},handleEvent:function(a){switch(a.type){case"change":a.target===this.inputFile&&this.updateFilename()}}},a.register("fileInput",b)}(c.r)||a),c.fr=d.c6J0hA||(d.c6J0hA=function(){return{createError:function(a,b,c,d){return{text:a,type:b,from:c,data:d}}}}()||a),c.fs=d.u4AVq2w||(d.u4AVq2w=function(a,b,c,d,f){function g(a,b){"ok"===a.status?(b.uploadSuccessAdaptee=a.uploadSuccessAdaptee,l(b.file,a.uploadUrl,b)):b.task.reject(f.createError(a.error,"networkAnswer","getUploadPhotoEndpoint",a))}function h(a,b){b.task.reject(f.createError("","network","getUploadPhotoEndpoint"))}function i(a,b){var c=b.task;c.currentTask=null;var d=b.uploadSuccessAdaptee,g=JSON.parse(this.response());g.error?c.reject(f.createError(d.error,"networkAnswer","uploadPhoto",g)):c.resolve({photoUrl:d.photoUrl,photoId:d.photoId,uploadData:g[0]})}function k(a,b){var c=b.task;c.currentTask=null,c.reject(f.createError("","network","uploadPhoto"))}function l(b,c,d){d.task.currentTask=a.request(c,"POST").attachFile(b).then(i,k,d).setExternal().send()}function m(){var a=this;return a.currentTask&&a.currentTask.abort(),a}return{upload:function(a,c,f){var i=d.start();i.abort=m();var k={file:a,task:i,uploadSuccessAdaptee:null};return f&&f.uploadUrl&&f.uploadSuccessAdaptee?(k.uploadSuccessAdaptee=f.uploadSuccessAdaptee,l(a,f.uploadUrl,k)):i.currentTask=b.request(c,"POST",{}).then(g,h,k).withToken().send(),i}}}(c.be,c.dj,c.h,c.i,c.fr)||a),c.ft=d.bi5QvBA||(d.bi5QvBA=function(a){return{setDisabled:function(b,c){b.disabled=c,a.switchClass(b,c,"__dis")}}}(c.m)||a),c.fu=d.rjAKwVg||(d.rjAKwVg=function(a,b,c,d,f,g,h,i,k,l,m,n,o,p,q,s,t){function v(a,b){"redirect"===a.status?b.currentSetMainTask.resolve(a.redirect):b.currentSetMainTask.reject(q.createError(a.error,"networkAnswer","setMain",a))}function w(a,b){a?b.currentSetMainTask.reject(q.createError(a,"networkAnswer","setMain")):b.currentSetMainTask.reject(q.createError(a,"network","setMain"))}function x(a,b){b.currentSetMainApiTask=o.run(b.setAsMainEndpoint,{photoId:a.photoId,geometry:a.uploadData.geometry}).then(v,w,b)}function z(a,b){b.currentSetMainTask.reject(a)}function A(a){a.state.set("inProcess",!1),a.currentSetMainApiTask=null,a.currentUploadTask=null,a.currentSetMainTask=null}function B(a,b){A(b),b.hideError(),s.change(a)}function C(a,b){this===b.currentSetMainTask&&(A(b),logClientEvent("ajax.newReg.fail.photo",a.from),"network"===a.type?p.show():b.showError(a.text))}function D(a){var b=this;f.switchClass(b.rootForm,a,"__photo-loading"),m.setDisabled(b.buttonUpload,a),m.setDisabled(b.buttonRetryUpload,a)}function E(a){var b=this;f.switchClass(b.selectedPhotoContent,a,"__hidden"),f.switchClass(b.loadErrorContent,!a,"__hidden")}function F(a,b){var c=this;c.rootForm=b,c.stub=b.getElementsByClassName("registration-photo_no_photo")[0],c.nonStub=b.getElementsByClassName("registration-photo_has_photo")[0],c.imageContainer=b.getElementsByClassName("registration-photo_img")[0],c.buttonUpload=b.getElementsByClassName("registration-photo_upload-button")[0],c.buttonRetryUpload=b.getElementsByClassName("registration-photo_retry-upload-button")[0],c.selectedPhotoContent=b.getElementsByClassName("registration-photo_selected-photo-content")[0],c.loadErrorContent=b.getElementsByClassName("registration-photo_load-error-content")[0],c.errorText=b.getElementsByClassName("registration-photo_error-text")[0];var d=b.getElementsByClassName("registration-upload-files_input")[0];c.fileInput=d,c.currentUploadTask=null,c.currentSetMainApiTask=null,c.currentSetMainTask=null,c.getUploadUrlEndpoint=d.getAttribute("data-get-upload-url-endpoint"),c.setAsMainEndpoint=d.getAttribute("data-set-as-main-endpoint"),c.initialUploadData={uploadSuccessAdaptee:JSON.parse(d.getAttribute("data-initial-upload-success-adaptee")),uploadUrl:d.getAttribute("data-initial-upload-url")},c.currentPhoto=null,c.state=n.create({inProcess:!1,inError:!1}).onChanged("inProcess",D,c).onChanged("inError",E,c)}F.prototype={renderImage:function(a){var b=this,c=!a;return b.imageContainer.style.backgroundImage="url("+a+")",f.switchClass(b.stub,!c,"__hidden"),f.switchClass(b.nonStub,c,"__hidden"),b},showError:function(a){var b=this;return b.errorText.innerHTML=a,b.state.set("inError",!0),b},hideError:function(){var a=this;return a.state.set("inError",!1),a},_processingFirstPhotoFromInput:function(){var a=this;if(t.upload()){var b=a.fileInput.files[0];return a.currentPhoto=b,a.renderImage(URL.createObjectURL(b)),!0}return!1},uploadPhoto:function(a){var b=this,c=b.initialUploadData;c&&(b.initialUploadData=null);var d=k.upload(a,b.getUploadUrlEndpoint,c).then(x,z,b);return b.currentUploadTask=d},setFileAsMainPhoto:function(a){var b=this,c=b.currentSetMainTask=h.start().then(B,C,b);return l.start(c),b.state.set("inProcess",!0),b.uploadPhoto(a),c},closeUploadedPhoto:function(){var a=this;return a.fileInput.value="",a.renderImage().hideError()},closeAction:{tap:function(e){this.closeUploadedPhoto()}},uploadAction:{tap:function(){var a=this;a.setFileAsMainPhoto(a.currentPhoto)}},retryUploadAction:{tap:function(){var a=this;a.setFileAsMainPhoto(a.currentPhoto)}},uploadInputInteraction:{change:function(e){this._processingFirstPhotoFromInput()}}},a.initRegistrationPhotoUpload=b.create({init:function(a){t.upload()?i.register("registrationPhotoUpload",F):s.change(a.fallbackLink)}})}(c.e,c.v,c.be,c.dj,c.m,c.h,c.i,c.r,c.fs,c.ef,c.ft,c.aj,c.dr,c.br,c.fr,c.bv,c.fm)||a),c.fv=d.fgQv9wQ||(d.fgQv9wQ=function(a,b){function c(c){var f=this;f.fieldRoot=b.parentBySelector(c,".selects-set")||b.parentBySelector(c,".field"),f.fieldElement=c,f.isErrorShowed=a.hasClass(f.fieldRoot,d)}var d="__error";return c.prototype={validate:function(){var a=this;return a.hideError(),a},hideError:function(){var b=this;return b.isErrorShowed&&(a.removeClass(b.fieldRoot,d),b.isErrorShowed=!1),b}},{create:function(a){return new c(a)}}}(c.m,c.p)||a),c.fw=d.fFVMVww||(d.fFVMVww=function(a){function b(b){return b.okFieldValidation?b.okFieldValidation:b.okFieldValidation=a.create(b)}return{createHandlers:function(){return{input:function(e){b(e.target).validate()},change:function(e){b(e.target).validate()}}}}}(c.fv)||a),c.fx=d.v6vE1Jw||(d.v6vE1Jw=function(a,b){function c(a,b){}return c.prototype={validate:b.createHandlers()},{behaviorConstructor:c}}(c.r,c.fw)||a),c.fy=d.fVmdnXA||(d.fVmdnXA=function(a,b,c,d){a.formValidation=b.create({init:function(){d.register("validatableForm",c.behaviorConstructor)}})}(c.e,c.v,c.fx,c.r)||a),d.cKYfWEw||(d.cKYfWEw=function(){}(c.bj,c.bl,c.bp,c.ae,c.bw,c.bx,c.bz,c.cb,c.ci,c.cj,c.ck,c.co,c.cr,c.cs,c.cz,c.da,c.de,c.df,c.cw,c.di,c.dk,c.dl,c.dm,c.dv,c.dw,c.dx,c.dz,c.ea,c.eb,c.ec,c.ei,c.ej,c.ek,c.el,c.em,c.eo,c.eq,c.ex,c.fa,c.fk,c.fl,c.fn,c.fo,c.fp,c.fq,c.fu,c.fy)||a)}(this);